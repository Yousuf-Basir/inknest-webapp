(this["webpackJsonpinknest-webapp"]=this["webpackJsonpinknest-webapp"]||[]).push([[0],{108:function(e,t,s){},131:function(e,t,s){},171:function(e,t,s){},172:function(e,t){},173:function(e,t){},174:function(e,t){},175:function(e,t){},176:function(e,t){},180:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),i=s(46),r=s.n(i),c=(s(108),s(11)),l=s(36),o=s(17),d=s(14),u=s.n(d),f=s(18),h=Object(n.createContext)({currentFile:{file:null,fileInfo:null},setCurrentFile:function(e){}}),m=s(20),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var s=1024,n=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,i)).toFixed(n))+" "+a[i]},x=function(e){if(e.type)switch(e.type){case"application/pdf":return"pdf";case"application/x-mobipocket-ebook":return"mobi";case"application/octet-stream":return"kindle";case"application/epub+zip":return"epub";default:return""}else switch(e.name.split(".").pop()){case"pdf":return"pdf";case"mobi":return"mobi";case"azw3":return"kindle";case"epub":return"epub";default:return""}},j=s(13),g=s(34),p=s(70),O=Object(p.b)({name:"menuState",initialState:{isOpen:!1},reducers:{toggle:function(e){e.isOpen=!e.isOpen}}}),v=O.actions.toggle,y=O.reducer,w=s(1),N=function(){var e=Object(g.b)();return Object(w.jsxs)("button",{className:"pr-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple-500 lg:hidden",onClick:function(){e(v())},children:[Object(w.jsx)("span",{className:"sr-only",children:"Open sidebar"}),Object(w.jsx)(m.d,{className:"h-6 w-6","aria-hidden":"true"})]})},A=function(e){var t=e.pageTitle,s=Object(o.f)(),a=(f.reactLocalStorage.get("accessToken"),Object(n.useContext)(h)),i=(a.currentFile,a.setCurrentFile);return Object(w.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between sm:px-6 lg:px-8",children:[Object(w.jsx)(N,{}),Object(w.jsx)("div",{className:"flex-1 min-w-0",children:Object(w.jsx)("h1",{className:"text-lg font-medium leading-6 text-gray-900 sm:truncate",children:t})}),Object(w.jsx)("div",{className:"mt-4 flex sm:mt-0 sm:ml-4",children:Object(w.jsxs)("button",{type:"button",className:"space-x-2 order-0 inline-flex items-center px-3 py-1 lg:px-3 lg:py-1 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:order-1 sm:ml-3",children:[Object(w.jsx)(m.f,{className:"h-6 w-6","aria-hidden":"true"}),Object(w.jsx)("input",{onChange:function(e){var t=e.target.files[0];i({file:t,fileInfo:{name:t.name,size:b(t.size),type:x(t)}}),s.push("/fileviewer")},className:"absolute opacity-0",type:"file"}),Object(w.jsx)("span",{children:"Add book"})]})})]})},k=s(44),S=function(){var e=f.reactLocalStorage.get("accessToken");return e?Object(k.a)(e):null};function U(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var _=function(){return Object(w.jsxs)("div",{className:"flex flex-col w-full py-20 justify-center items-center",style:{height:"calc(100vh - 16rem)"},children:[Object(w.jsx)("p",{className:"text-gray-400",children:"Nothing here"}),Object(w.jsxs)("p",{className:"text-gray-600",children:["Click ",Object(w.jsx)("b",{children:"Add book"})," to add new books in this shelf "]})]})},C=function(){var e=new URLSearchParams(Object(o.g)().search),t=e.get("shelfUidTab"),s=e.get("shelfName"),a=e.get("sharedBy"),i=f.reactLocalStorage.get("accessToken"),r=Object(n.useState)([]),l=Object(c.a)(r,2),d=l[0],m=l[1],x=Object(n.useState)(d[0]),g=Object(c.a)(x,2),p=g[0],O=g[1],v=Object(n.useState)([]),y=Object(c.a)(v,2),N=y[0],k=y[1],C=Object(n.useState)(""),D=Object(c.a)(C,2),T=D[0],F=D[1],B=Object(n.useContext)(h),I=(B.currentFile,B.setCurrentFile),z=Object(o.f)();return Object(n.useEffect)((function(){d[0]&&!t&&O(d[0].Shelf_UID)}),[d]),Object(n.useEffect)((function(){var e;p&&(e=p,u.a.get("".concat("http://146.56.54.187:3001","/file?shelfUid=").concat(e),{headers:{token:i}}).then((function(e){k(e.data)})).catch((function(e){404==e.response.status&&(console.log("No books found in this shelf"),k([]))})))}),[p]),Object(n.useEffect)((function(){S()||z.push("/signin"),u.a.get("".concat("http://146.56.54.187:3001","/shelf"),{headers:{token:i}}).then((function(e){m(function(e){var t=e.slice(0);return t.sort((function(e,t){return t.Shelf_Created_Date-e.Shelf_Created_Date})),t}(e.data.userShelfs))})).catch((function(e){return console.log(e)})),t&&O(t),I({})}),[]),Object(w.jsxs)("div",{className:"max-w-7xl sm:px-6 lg:px-8",children:[s&&a?Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("h1",{className:"flex-1 text-xl font-bold text-gray-900",children:s}),Object(w.jsxs)("div",{className:"text-indigo-700 flex items-center space-x-2",children:[Object(w.jsx)(j.i,{className:"h-4 w-4 inline"}),Object(w.jsx)("span",{children:a})]})]}):Object(w.jsx)(A,{pageTitle:"My books"}),Object(w.jsxs)("div",{className:"mt-3 sm:mt-2",children:[Object(w.jsxs)("div",{className:"sm:hidden",children:[Object(w.jsx)("label",{htmlFor:"tabs",className:"sr-only",children:"Select a shelf"}),Object(w.jsx)("select",{onChange:function(e){return O(e.target.value)},id:"tabs",name:"tabs",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",defaultValue:"Recently Viewed",children:d.map((function(e){return Object(w.jsxs)("option",{value:e.Shelf_UID,children:[" ",e.Shelf_Name]},e.Shelf_UID)}))})]}),Object(w.jsx)("div",{className:"hidden sm:block",children:Object(w.jsx)("div",{className:"flex items-center border-b border-gray-200",children:Object(w.jsx)("nav",{className:"flex-1 -mb-px flex space-x-6 xl:space-x-8","aria-label":"Tabs",children:d.map((function(e){return Object(w.jsx)("button",{onClick:function(){return O(e.Shelf_UID)},className:U(e.Shelf_UID==p?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:e.Shelf_Name},e.Shelf_UID)}))})})})]}),Object(w.jsx)("section",{className:"mt-8 pb-16","aria-labelledby":"gallery-heading",children:N.length?Object(w.jsx)("ul",{role:"list",className:"grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:N.map((function(e){return Object(w.jsxs)("li",{onClick:function(){F(e.File_UID),function(e){fetch("".concat("http://146.56.54.187:3001","/file/get-file-url?token=").concat(i,"&fileName=").concat(e.File_Name)).then((function(e){return e.blob()})).then((function(t){I({file:t,fileInfo:{name:e.Original_Name,size:b(e.File_Size),type:e.Mimetype,fileUid:e.File_UID}}),z.push("/fileviewer")}))}(e)},className:"relative",children:[Object(w.jsxs)("div",{className:U(e.File_UID==T?"ring-2 ring-offset-2 ring-indigo-500":"focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-indigo-500","group block w-full aspect-w-10 aspect-h-12 rounded-lg bg-gray-100 overflow-hidden shadow-xl cursor-pointer"),children:["pdf"==e.Mimetype?Object(w.jsx)("img",{src:"".concat("http://146.56.54.187:3001","/file/get-thumbnail-url?token=").concat(i,"&fileName=").concat(e.File_Name),alt:"",className:U(e.File_UID==T?"":"group-hover:opacity-75","object-cover pointer-events-none")}):Object(w.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAHYgAAB2IBOHqZ2wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAdwSURBVHic7dzNj111Hcfxz+/ODDPttLVShVIfgu0U+gAKjtMEpiSTqPwLLiVxgRsCK02QxJDIhsSExIXBxMSlcSuJCzaVUiDGBOICJWlYEAJRwGpKoWXmnp+LaYVqoZTezrlzf6/Xrnduzvlm5tx3z+NNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4OqVvgeYRCsrdXo4fO/rtdbr+55lEpRS/jk1tfUvx46Vtb5nmTQCMGLLy2f2JPXpJIf6nmXCvDwYlO8cPz7/Zt+DTJJB3wNMmlrzk/jwXwuHui4P9z3EpBGAESulHux7hslVD/c9waQRgNFzWHXt+N2O2HTfA7Sg25vUbR/+u5xLBq9c/J65ueS226Y2drAxdvp0zSuvdH2PMfEEYAOsfr9k+JGd18HrydxD9aL37N49yBNPzG3wZOPrxReHeeCBs32PMfEcAkDDBAAaJgDQMAGAhgkANEwAoGECAA0TAGiYAEDDBAAaJgDQMM8CTIjV1eStt+rl37gBpqeTG27w4N5mIAAT4JlnhnnssXM5c2Y8ApAkCwuDPP74nBCMOYcAm9zqasbuw58kJ092efLJD/oeg8sQgE3uzTe7sfvwX3DypOf5x50AbHLdGH/GhsO+J+BynAOYRNNJ3bXB61xLyjsbvE6umgBMoG53cvaJjT35dqlvOWL8OQSAhgkANEwAoGECAA0TAGiYAEDDBAAaJgDQMAGAhgkANEwAoGGeBZhAg78ncz/a4PvyVzd2dYyGAEyi1WTwat9DsBk4BNjkBmP8F5ya6nsCLmeMNx8+jZtuGmR+fjy/d29hweY17vyFNrmZmeSRR2bHLgILC4Pcf/91fY/BZTgHMAHuuWcqTz21Na+91mVtre9pku3bS/bsGa8gcWkCMCFmZpJ9++zQcWVsMdAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgA9KDO/v9rW7Zs/BwgAD2oX0jqly5+7ciRqX6GoWnTfQ/QpJKcfbhk5rc1N79d8u0j07nvvuv6nooGCUBP6o3JBw+W/GDnbL47539/+uEQABomANAwAYCGCQA0TACgYQIADXMZcAPM/rR+7M8ezdk8uoGzwEfZA4CGCcCIlZJzfc8wwT7oe4BJIwCj93TfA0yu8se+J5g0AjBip07N/6KU8svEnsColJJ/11p/tWPH1p/3PcukKX0PMKkWF+vM3Ny7t5QyWO66erSULCY5kBFGt34+6fYm3b6k21vSHUjqtlEt/dqrqb976aZt3+t7jpYJwAZaXn5reymz30gGi12XxfNRODTKddQbk+GtSd2XDPcl3b6SzIxyDaMjAP0TgJ4tL5/ZU2uWBoNuqdZyJMlSkp2jWn6dTurXkm6hpFtYj0Ldk94P/so7yeBPeW7213nwxIn5P/c7TbsEYOzUcvTo6f21DpbWw1CXai13JhnddwZtXT9sGO5Luv3rcai7Rrb0y5p6uWb2sfz3LEkpefzZZ7f9eOMm4AIB2ARWVur06uq7t5ZSFpMs1loWk7qUZGTfIlK3Jt1C0h04fz7hlqTuGNXSLzb7s5qply56qUve33nixBdPX5s18nEEYJO69946f+bM6W/WOlgaDLJUa1laP/IfnXpTOb+XUFMXkuHNJbnE9xleqbmHagavX/zacFgPvfDC9r9e/dK5EgIwQRYX//m5LVumb08Gi7WW5aTek2T3yFYwSLo961ceLpxkrAsl9QpvKL9UAAaDevj48e0vj2xWPhUBmHDLy2f2rF9t6Ba7riyWkruTXD+yFUwn3VeT7mBZvyS5N+m+nE/csgRgfHgYaMKdODH/RpI3kvz+wmtHj57dm6wdzYfnExaTzH2mFawlg1eTwasfeeBpazL8SkldSLoDNcODJXVk1zUYJXsA5PDhet2OHe/fMTU1PH8uIUsZ9U1Lu85fityfTP+hprxz8c/tAfRDALiklZV/bFtbm7vjf25aOphrtM0IQD8EgE9tZeXUzrW1mW8l9ej58wlHktwwimULQD8EgKty993/2pdMLZVSjiRlKal3Jpm/0uV0XXfw+ed3/O0ajMgnEABGamWlTg+HZw51XVmqtTtSSllKcns++YTzezMz87uOHStnN2hMzhMArrm77qpbktN3Tk2t396c9ZOM+7O+/Z2rNT987rltv+l1yEYJAL1YWTm1c3V19sDMzNrJY8d2vN33PAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBn9x/mA4lo+T1PLwAAAABJRU5ErkJggg==",alt:"",className:U(e.File_UID==T?"":"group-hover:opacity-75","object-cover pointer-events-none")}),Object(w.jsx)("button",{type:"button",className:"absolute inset-0 focus:outline-none",children:Object(w.jsxs)("span",{className:"sr-only",children:["View details for ",e.File_Name]})})]}),Object(w.jsx)("p",{className:"mt-2 block text-sm font-medium text-gray-900 truncate pointer-events-none",children:e.Original_Name}),Object(w.jsx)("p",{className:"block text-sm font-medium text-gray-500 pointer-events-none",children:b(e.File_Size)})]},e.File_UID)}))}):Object(w.jsx)(_,{})})]})},D=s(50),T=s(182),F=s(181);function B(e){var t=e.openState,s=e.setOpenState,a=e.setSelectedUser,i=f.reactLocalStorage.get("accessToken"),r=Object(n.useState)([]),l=Object(c.a)(r,2),o=l[0],d=l[1],h=Object(n.useState)(!1),b=Object(c.a)(h,2),x=b[0],j=b[1],g=Object(n.useState)([]),p=Object(c.a)(g,2),O=p[0],v=p[1],y=Object(n.useState)([]),N=Object(c.a)(y,2),A=N[0],k=N[1];return Object(n.useEffect)((function(){u.a.get("".concat("http://146.56.54.187:3001","/listusers"),{headers:{token:i}}).then((function(e){console.log(e.data.userList),d(e.data.userList)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){O.length>2?(k(o.filter((function(e){return e.Email.includes(O)||e.First_Name.includes(O)||e.Last_Name.includes(O)}))),j(!0)):j(!1)}),[O]),Object(w.jsx)(T.a.Root,{show:t,as:n.Fragment,children:Object(w.jsx)(F.a,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",open:t,onClose:s,children:Object(w.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(w.jsx)(T.a.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(w.jsx)(F.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(w.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(w.jsx)(T.a.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(w.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:Object(w.jsx)(m.h,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),Object(w.jsxs)("div",{className:"mt-3 sm:mt-5",children:[Object(w.jsx)(F.a.Title,{as:"h3",className:"text-center text-lg leading-6 font-medium text-gray-900",children:"Select user to share with"}),Object(w.jsx)("div",{className:"mt-1 flex rounded-md shadow-sm",children:Object(w.jsxs)("div",{className:"relative flex items-stretch flex-grow focus-within:z-10",children:[Object(w.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Object(w.jsx)(m.g,{className:"h-6 w-6 text-gray-400","aria-hidden":"true"})}),Object(w.jsx)("input",{onChange:function(e){v(e.target.value)},type:"text",className:"h-8 focus:ring-indigo-500 focus:border-indigo-500 block w-full rounded-none rounded-l-md pl-10 sm:text-sm border-gray-300",placeholder:"Search by name or email"})]})}),x?Object(w.jsx)("div",{className:"mt-2",children:Object(w.jsx)("ul",{className:"divide-y divide-gray-200",children:A.map((function(e){return Object(w.jsx)("li",{onClick:function(){a({selectedUserUid:e.User_UID,selectedUserName:e.First_Name+" "+e.Last_Name})},className:"py-4 cursor-pointer hover:bg-gray-100",children:Object(w.jsxs)("div",{className:"flex space-x-3",children:[Object(w.jsx)(m.i,{className:"h-6 w-6 rounded-full","aria-hidden":"true"}),Object(w.jsxs)("div",{className:"flex-1 space-y-1",children:[Object(w.jsx)("div",{className:"flex items-center justify-between",children:Object(w.jsx)("h3",{className:"text-sm font-medium",children:e.First_Name+" "+e.Last_Name})}),Object(w.jsxs)("p",{className:"text-sm text-gray-500",children:["Email: ",e.Email]})]})]})},e.User_UID)}))})}):null]})]})})})]})})})}var I=function(e){var t=e.slice(0);return t.sort((function(e,t){return t.dateCreated-e.dateCreated})),t};function z(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var E=function(){var e=f.reactLocalStorage.get("accessToken"),t=Object(n.useState)([]),s=Object(c.a)(t,2),a=s[0],i=s[1],r=Object(n.useState)([]),l=Object(c.a)(r,2),o=l[0],d=l[1],h=Object(n.useState)({}),m=Object(c.a)(h,2),b=m[0],x=m[1],g=Object(n.useState)(!1),p=Object(c.a)(g,2),O=p[0],v=p[1],y=Object(n.useState)(!1),A=Object(c.a)(y,2),S=A[0],U=A[1],_=function(){u.a.get("".concat("http://146.56.54.187:3001","/shared-by-me"),{headers:{token:e}}).then((function(e){i(e.data.sharedByMeList)})).catch((function(e){return console.log(e)}))},C=function(){d([]),u.a.get("".concat("http://146.56.54.187:3001","/shared-with-me"),{headers:{token:e}}).then((function(e){console.log(e.data);var t=e.data.sharedWithMeList;console.log(t),t.length>0&&t.forEach((function(e){d((function(t){return[].concat(Object(D.a)(t),[{name:e.Shelf_Name,href:"".concat("http://146.56.54.187:8082","/mybooks?shelfUidTab=").concat(e.Shelf_UID,"&shelfName=").concat(e.Shelf_Name,"&sharedBy=").concat(e.Shared_By),shelfDescription:e.Shared_By,bgColor:"bg-blue-400",sharedShelfUid:e.Shared_Shelf_UID,shelfUid:e.Shelf_UID,dateCreated:e.Shelf_Created_Date}])}))}))})).catch((function(e){return console.log(e)}))};return Object(n.useEffect)((function(){_(),C()}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"bg-gray-200 pb-32",children:Object(w.jsx)("header",{className:"py-6",children:Object(w.jsxs)("div",{className:"flex justify-between max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)(N,{}),Object(w.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Shared Shelfs"})]}),Object(w.jsxs)("button",{onClick:function(){return U(!S)},type:"button",className:"inline-flex lg:hidden space-x-2 items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S?Object(w.jsx)(j.j,{className:"h-6"}):null,Object(w.jsx)("span",{children:S?"Close":"View shared by me"})]})]})})}),Object(w.jsx)("main",{className:"-mt-32",children:Object(w.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:Object(w.jsx)("div",{className:"max-w-7xl mx-auto pb-12 px-4 sm:px-6 lg:px-8",children:Object(w.jsxs)("div",{className:"grid grid-cols-1 gap-2 items-start lg:grid-cols-3 lg:gap-2",children:[Object(w.jsx)("div",{className:S?"hidden lg:block grid-cols-1 gap-4 lg:col-span-2":"grid grid-cols-1 gap-4 lg:col-span-2",children:Object(w.jsx)("section",{"aria-labelledby":"section-1-title",children:Object(w.jsx)("div",{className:"rounded-lg bg-white overflow-y-auto shadow ",style:{height:"calc(100vh - 100px)"},children:Object(w.jsx)("div",{children:Object(w.jsx)("ul",{className:"m-6 mt-8 grid grid-cols-1 gap-5 sm:gap-6 sm:grid-cols-2 lg:grid-cols-2",children:I(o).map((function(t){return Object(w.jsxs)("li",{className:"col-span-1 flex shadow-sm rounded-md",children:[Object(w.jsx)("div",{className:z(t.bgColor,"flex-shrink-0 flex items-center justify-center w-12 text-white text-sm font-medium rounded-l-md"),children:Object(w.jsx)(j.d,{className:"w-5 h-5","aria-hidden":"true"})}),Object(w.jsxs)("div",{className:"flex-1 flex items-center justify-between border-t border-r border-b border-gray-200 bg-white rounded-r-md truncate",children:[Object(w.jsxs)("div",{className:"flex-1 px-4 py-2 text-sm truncate",children:[Object(w.jsx)("a",{href:t.href,className:"text-gray-900 font-medium hover:text-gray-600",children:t.name}),Object(w.jsxs)("p",{className:"text-gray-500 space-x-2 flex items-center",children:[Object(w.jsx)(j.i,{className:"h-4 inline","aria-hidden":"trur"}),Object(w.jsx)("span",{children:t.shelfDescription})]})]}),Object(w.jsxs)("div",{className:"flex-shrink-0 pr-2",children:[Object(w.jsx)("button",{onClick:function(){return s=t.sharedShelfUid,void(window.confirm("Remove this shared shelf?")&&u.a.delete("".concat("http://146.56.54.187:3001","/shared-with-me?sharedShelfUid=").concat(s),{headers:{token:e}}).then((function(e){console.log(e.data),C()})).catch((function(e){return console.log(e)})));var s},className:"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(w.jsx)(j.h,{className:"w-5 h-5","aria-hidden":"true"})}),Object(w.jsx)("button",{onClick:function(){v(!0),x({shelfUid:t.shelfUid,shelfName:t.name})},className:"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(w.jsx)(j.g,{className:"w-5 h-5","aria-hidden":"true"})})]})]})]},t.sharedShelfUid)}))})})})})}),Object(w.jsx)("div",{className:"grid grid-cols-1 gap-4",children:Object(w.jsx)("section",{"aria-labelledby":"section-2-title",children:Object(w.jsx)("div",{className:"rounded-lg bg-white overflow-y-auto shadow",style:{height:"calc(100vh - 100px)"},children:Object(w.jsx)("section",{"aria-labelledby":"recent-hires-title",children:Object(w.jsx)("div",{className:"rounded-lg bg-white overflow-y-auto",children:Object(w.jsxs)("div",{className:"p-6",children:[Object(w.jsx)("h2",{className:"text-base font-medium text-gray-900",id:"recent-hires-title",children:"Shared by me"}),Object(w.jsx)("div",{className:"flow-root mt-6",children:Object(w.jsx)("ul",{className:"-my-5 divide-y divide-gray-200",children:a.map((function(t){return Object(w.jsx)("li",{className:"py-4",children:Object(w.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(w.jsx)("div",{className:"flex-shrink-0 bg-gray-200 p-2 rounded-md",children:Object(w.jsx)(j.d,{className:"w-5 h-5","aria-hidden":"true"})}),Object(w.jsxs)("div",{className:"flex-1 min-w-0",children:[Object(w.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.Shelf_Name}),Object(w.jsxs)("p",{className:"text-sm text-gray-500 truncate space-x-2",children:[Object(w.jsx)(j.g,{className:"w-3 h-3 inline","aria-hidden":"true"}),Object(w.jsx)("span",{children:t.Shared_With})]})]}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){return s=t.Shared_With_UID,n=t.Shared_Shelf_UID,void(window.confirm("Unshare this shelf?")&&u.a.delete("".concat("http://146.56.54.187:3001","/share?sharedWithUid=").concat(s,"&sharedShelfUid=").concat(n),{headers:{token:e}}).then((function(e){_()})).catch((function(e){return console.log(e)})));var s,n},className:"inline-flex items-center shadow-sm px-2.5 py-0.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50",children:"Unshare"})})]})},t.Shared_Shelf_UID)}))})})]})})})})})})]})})})}),Object(w.jsx)(B,{openState:O,setOpenState:v,setSelectedUser:function(t){var s=t.selectedUserUid,n=t.selectedUserName,a=Object(k.a)(e);u.a.post("".concat("http://146.56.54.187:3001","/share"),{shelfUid:b.shelfUid,sharedByUid:a.userUid,sharedWithUid:s,shelfName:b.shelfName,sharedBy:a.firstName+" "+a.lastName,sharedWith:n},{headers:{token:e}}).then((function(e){console.log(e.data),alert("Shelf has been shared successfully with "+n)})).catch((function(e){return console.log(e)}))}})]})},M=s(184);function L(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var J=function(e){var t=e.slice(0);return t.sort((function(e,t){return t.dateCreated-e.dateCreated})),t},P=function(){var e=f.reactLocalStorage.get("accessToken"),t=Object(n.useState)([]),s=Object(c.a)(t,2),a=s[0],i=s[1],r=Object(n.useState)(""),l=Object(c.a)(r,2),o=l[0],d=l[1],h=Object(n.useState)(""),b=Object(c.a)(h,2),x=b[0],g=b[1],p=Object(n.useState)(!0),O=Object(c.a)(p,2),v=O[0],y=O[1],A=Object(n.useState)({}),S=Object(c.a)(A,2),U=S[0],_=S[1],C=Object(n.useState)(!1),T=Object(c.a)(C,2),F=T[0],I=T[1],z=Object(n.useState)(!1),E=Object(c.a)(z,2),P=E[0],Y=E[1],G=function(){i([]),u.a.get("".concat("http://146.56.54.187:3001","/shelf"),{headers:{token:e}}).then((function(e){var t=e.data.userShelfs;console.log(t),t.length>0&&t.forEach((function(e){i((function(t){return[].concat(Object(D.a)(t),[{name:e.Shelf_Name,initials:1==e.Is_Open?"GlobeIcon":"LockClosedIcon",href:"".concat("http://146.56.54.187:8082","/mybooks?shelfUidTab=").concat(e.Shelf_UID),shelfDescription:e.Shelf_Description,bgColor:1==e.Is_Open?"bg-green-500":"bg-purple-600",shelfUid:e.Shelf_UID,dateCreated:e.Shelf_Created_Date}])}))}))})).catch((function(e){return console.log(e)}))},R=function(t){t.preventDefault(),u.a.put("".concat("http://146.56.54.187:3001","/shelf"),{shelfName:o,isOpen:v?1:0,shelfDescription:x},{headers:{token:e}}).then((function(e){console.log(e),d(""),g(""),y(!0),alert("New shelf created"),G()})).catch((function(e){return console.log(e)}))};return Object(n.useEffect)((function(){G();var t=Object(k.a)(e);console.log(t)}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"bg-gray-800 pb-32 ",children:Object(w.jsx)("header",{className:"py-6",children:Object(w.jsxs)("div",{className:"flex justify-between max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)(N,{}),Object(w.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Shelfs"})]}),Object(w.jsxs)("button",{onClick:function(){return Y(!P)},type:"button",className:"inline-flex lg:hidden space-x-2 items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[P?Object(w.jsx)(m.j,{className:"h-6"}):null,Object(w.jsx)("span",{children:P?"Close":"Create new shelf"})]})]})})}),Object(w.jsx)("main",{className:"-mt-32",children:Object(w.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:max-w-7xl lg:px-8",children:Object(w.jsx)("div",{className:"max-w-7xl mx-auto pb-12 px-4 sm:px-6 lg:px-8",children:Object(w.jsxs)("div",{className:"grid grid-cols-1 gap-2 items-start lg:grid-cols-3 lg:gap-2",children:[Object(w.jsx)("div",{className:P?"hidden lg:block grid-cols-1 gap-4 lg:col-span-2":"grid grid-cols-1 gap-4 lg:col-span-2",children:Object(w.jsx)("section",{"aria-labelledby":"section-1-title",children:Object(w.jsx)("div",{className:"rounded-lg bg-white overflow-x-auto shadow",style:{height:"calc(100vh - 100px)"},children:Object(w.jsx)("div",{children:Object(w.jsx)("ul",{className:"m-6 mt-8 grid grid-cols-1 gap-5 sm:gap-6 sm:grid-cols-2 lg:grid-cols-2",children:J(a).map((function(t){return Object(w.jsxs)("li",{className:"col-span-1 flex shadow-sm rounded-md",children:[Object(w.jsx)("div",{className:L(t.bgColor,"flex-shrink-0 flex items-center justify-center w-12 text-white text-sm font-medium rounded-l-md"),children:Object(w.jsx)(j.d,{className:"w-5 h-5","aria-hidden":"true"})}),Object(w.jsxs)("div",{className:"flex-1 flex items-center justify-between border-t border-r border-b border-gray-200 bg-white rounded-r-md truncate",children:[Object(w.jsxs)("div",{className:"flex-1 px-4 py-2 text-sm truncate",children:[Object(w.jsx)("a",{href:t.href,className:"text-gray-900 font-medium hover:text-gray-600",children:t.name}),Object(w.jsx)("p",{className:"text-gray-500",children:t.shelfDescription})]}),Object(w.jsxs)("div",{className:"flex-shrink-0 pr-2",children:[Object(w.jsx)("button",{onClick:function(){return s=t.shelfUid,void(window.confirm("By deleting this shelf all books of this shelf will be deleted. Delete anyway?")&&u.a.delete("".concat("http://146.56.54.187:3001","/shelf?shelfUid=").concat(s),{headers:{token:e}}).then((function(e){G()})).catch((function(e){return console.log(e)})));var s},className:"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(w.jsx)(j.h,{className:"w-5 h-5","aria-hidden":"true"})}),Object(w.jsx)("button",{onClick:function(){I(!0),_({shelfUid:t.shelfUid,shelfName:t.name})},className:"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Object(w.jsx)(j.g,{className:"w-5 h-5","aria-hidden":"true"})})]})]})]},t.shelfUid)}))})})})})}),Object(w.jsx)("div",{className:"grid grid-cols-1 gap-4",children:Object(w.jsx)("section",{"aria-labelledby":"section-2-title",children:Object(w.jsx)("div",{className:"rounded-lg bg-white overflow-y-auto shadow",style:{height:"calc(100vh - 100px)"},children:Object(w.jsx)("form",{onSubmit:function(e){return R(e)},children:Object(w.jsx)("div",{className:"sm:rounded-md sm:overflow-y-auto",children:Object(w.jsxs)("div",{className:"px-4 py-5 bg-white space-y-6 sm:p-6",children:[Object(w.jsx)("h1",{className:"text-xl font-bold",children:"Create new shelf"}),Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"col-span-3 sm:col-span-2",children:[Object(w.jsx)("label",{htmlFor:"company-website",className:"block text-sm font-medium text-gray-700",children:"Shelf name"}),Object(w.jsx)("div",{className:"mt-1 flex rounded-md shadow-sm",children:Object(w.jsx)("input",{onChange:function(e){return d(e.target.value)},value:o,type:"text",className:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Type shelf name"})})]})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"about",className:"block text-sm font-medium text-gray-700",children:"Description"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("textarea",{onChange:function(e){return g(e.target.value)},value:x,rows:3,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"Type shelf description",defaultValue:""})}),Object(w.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Shortly describe what types of books you want save in this shelf"})]}),Object(w.jsx)("div",{children:Object(w.jsxs)(M.a.Group,{as:"div",className:"flex items-center justify-between",children:[Object(w.jsxs)("span",{className:"flex-grow flex flex-col",children:[Object(w.jsx)(M.a.Label,{as:"span",className:"text-sm font-medium text-gray-900",passive:!0,children:"Open shelf"}),Object(w.jsx)(M.a.Description,{as:"span",className:"text-sm text-gray-500",children:v?"Any inknest user can browse open shelf.":"Only you can access this shelf."})]}),Object(w.jsx)(M.a,{checked:v,onChange:y,className:L(v?"bg-indigo-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),children:Object(w.jsx)("span",{"aria-hidden":"true",className:L(v?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200")})})]})}),Object(w.jsx)("div",{className:"pt-5",children:Object(w.jsx)("div",{className:"flex justify-end",children:Object(w.jsx)("button",{type:"submit",className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create shelf"})})})]})})})})})})]})})})}),Object(w.jsx)(B,{openState:F,setOpenState:I,setSelectedUser:function(t){var s=t.selectedUserUid,n=t.selectedUserName,a=Object(k.a)(e);u.a.post("".concat("http://146.56.54.187:3001","/share"),{shelfUid:U.shelfUid,sharedByUid:a.userUid,sharedWithUid:s,shelfName:U.shelfName,sharedBy:a.firstName+" "+a.lastName,sharedWith:n},{headers:{token:e}}).then((function(e){console.log(e.data),alert("Shelf has been shared successfully with "+n)})).catch((function(e){return console.log(e)}))}})]})},Y=function(){var e=Object(o.f)();return Object(n.useEffect)((function(){S()&&e.push("/mybooks")}),[]),Object(w.jsxs)("div",{className:"min-h-screen bg-white flex",children:[Object(w.jsx)("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:Object(w.jsxs)("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{className:"h-12 w-auto",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg",alt:"Workflow"}),Object(w.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})]}),Object(w.jsx)("div",{className:"mt-8",children:Object(w.jsx)("div",{className:"mt-6",children:Object(w.jsxs)("form",{className:"space-y-6",action:"#",onSubmit:function(t){return function(t){t.preventDefault();var s=t.target.elements,n=s.email,a=s.password;console.log(n,a),u.a.post("".concat("http://146.56.54.187:3001","/login"),{email:n.value,password:a.value}).then((function(t){var s=t.data,n=s.accessToken,a=s.msg;n?(f.reactLocalStorage.set("accessToken",n),e.push("/mybooks")):alert(a)})).catch((function(e){return console.log(e)}))}(t)},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),Object(w.jsxs)("div",{className:"flex items-center justify-between",children:[Object(w.jsxs)("div",{className:"flex items-center",children:[Object(w.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),Object(w.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),Object(w.jsx)("div",{className:"text-sm",children:Object(w.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot your password?"})})]}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})}),Object(w.jsx)("div",{children:Object(w.jsxs)(l.b,{to:"/signup",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:["Donn't have account? \xa0 ",Object(w.jsx)("span",{className:"text-indigo-500",children:"Sign up"})]})})]})})})]})}),Object(w.jsx)("div",{className:"hidden lg:block relative w-0 flex-1",children:Object(w.jsx)("img",{className:"absolute inset-0 h-full w-full object-cover",src:"https://images.unsplash.com/photo-1505904267569-f02eaeb45a4c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1908&q=80",alt:""})})]})},G=function(){var e=Object(o.f)();return Object(n.useEffect)((function(){S()&&e.push("/mybooks")}),[]),Object(w.jsxs)("div",{className:"min-h-screen bg-white flex",children:[Object(w.jsx)("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:Object(w.jsxs)("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{className:"h-12 w-auto",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg",alt:"Workflow"}),Object(w.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign up for new account"})]}),Object(w.jsx)("div",{className:"mt-8",children:Object(w.jsx)("div",{className:"mt-6",children:Object(w.jsxs)("form",{className:"space-y-6",action:"#",onSubmit:function(t){return function(t){t.preventDefault();var s=t.target.elements,n=s.firstName,a=s.lastName,i=s.email,r=s.password;console.log(n,a,i,r),u.a.post("".concat("http://146.56.54.187:3001","/signup"),{firstName:n.value,lastName:a.value,email:i.value,password:r.value}).then((function(t){var s=t.data,n=s.accessToken,a=s.msg;n?(f.reactLocalStorage.set("accessToken",n),e.push("/mybooks")):alert(a)})).catch((function(e){return console.log(e)}))}(t)},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First name"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("input",{id:"firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last name"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("input",{id:"lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Object(w.jsx)("div",{className:"mt-1",children:Object(w.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})})]}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign up"})}),Object(w.jsx)("div",{children:Object(w.jsxs)(l.b,{to:"/signin",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:["Already have account? \xa0 ",Object(w.jsx)("span",{className:"text-indigo-500",children:"Sign in"})]})})]})})})]})}),Object(w.jsx)("div",{className:"hidden lg:block relative w-0 flex-1",children:Object(w.jsx)("img",{className:"absolute inset-0 h-full w-full object-cover",src:"https://images.unsplash.com/photo-1505904267569-f02eaeb45a4c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1908&q=80",alt:""})})]})},R=(s(131),s(183)),W=s.p+"static/media/inknest-logo.64fe356a.svg",Q=[{name:"My books",href:"/mybooks",icon:m.a},{name:"Shelfs",href:"/shelfs",icon:m.c},{name:"Shared shelfs",href:"/sharedshelfs",icon:m.b},{name:"Explore",href:"/explore",icon:j.e}];function q(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var V=function(){var e=Object(g.c)((function(e){return e.menuState.isOpen})),t=Object(g.b)(),s=Object(o.f)(),a=function(){t(v())},i=Object(o.g)();if("/signin"==i.pathname||"/signup"==i.pathname)return null;var r=S();return Object(w.jsxs)("div",{className:"relative h-screen flex overflow-hidden bg-white",children:[Object(w.jsx)(T.a.Root,{show:e,as:n.Fragment,children:Object(w.jsxs)(F.a,{as:"div",static:!0,className:"fixed inset-0 flex z-40 lg:hidden",open:e,onClose:a,children:[Object(w.jsx)(T.a.Child,{as:n.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(w.jsx)(F.a.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),Object(w.jsx)(T.a.Child,{as:n.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:Object(w.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-white",children:[Object(w.jsx)(T.a.Child,{as:n.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(w.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:Object(w.jsxs)("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:function(){return a()},children:[Object(w.jsx)("span",{className:"sr-only",children:"Close sidebar"}),Object(w.jsx)(m.k,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),Object(w.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:Object(w.jsx)("img",{className:"h-10 w-auto",src:W,alt:"Inknest"})}),Object(w.jsx)("div",{className:"mt-5 flex-1 h-0 overflow-y-auto",children:Object(w.jsx)("nav",{className:"px-2",children:Object(w.jsx)("div",{className:"space-y-1",children:Q.map((function(e){return Object(w.jsxs)("a",{href:e.href,className:q(i.pathname==e.href?"bg-gray-100 text-gray-900":"text-gray-600 hover:text-gray-900 hover:bg-gray-50","group flex items-center px-2 py-2 text-base leading-5 font-medium rounded-md"),"aria-current":i.pathname==e.href?"page":void 0,children:[Object(w.jsx)(e.icon,{className:q(i.pathname==e.href?"text-gray-500":"text-gray-400 group-hover:text-gray-500","mr-3 flex-shrink-0 h-6 w-6"),"aria-hidden":"true"}),e.name]},e.name)}))})})})]})}),Object(w.jsx)("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]})}),Object(w.jsx)("div",{className:"hidden lg:flex lg:flex-shrink-0",children:Object(w.jsxs)("div",{className:"flex flex-col w-64 border-r border-gray-200 pt-5 pb-4 bg-gray-100",children:[Object(w.jsx)("div",{className:"flex items-center justify-center flex-shrink-0 px-6",children:Object(w.jsx)("img",{className:"h-12 w-auto",src:W,alt:"Workflow"})}),Object(w.jsxs)("div",{className:"h-0 flex-1 flex flex-col overflow-y-auto",children:[Object(w.jsx)(R.a,{as:"div",className:"px-3 mt-6 relative inline-block text-left",children:function(e){var t=e.open;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsx)(R.a.Button,{className:"group w-full bg-gray-100 rounded-md px-3.5 py-2 text-sm text-left font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-purple-500",children:Object(w.jsxs)("span",{className:"flex w-full justify-between items-center",children:[Object(w.jsx)("span",{className:"flex min-w-0 items-center justify-between space-x-3",children:Object(w.jsxs)("span",{className:"flex-1 flex flex-col min-w-0",children:[Object(w.jsx)("span",{className:"text-gray-900 text-sm font-medium truncate",children:r.firstName+" "+r.lastName||""}),Object(w.jsx)("span",{className:"text-gray-500 text-sm truncate",children:r.email||""})]})}),Object(w.jsx)(j.f,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"})]})})}),Object(w.jsx)(T.a,{show:t,as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(w.jsxs)(R.a.Items,{static:!0,className:"z-10 mx-3 origin-top absolute right-0 left-0 mt-1 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-200 focus:outline-none",children:[Object(w.jsx)("div",{className:"py-1"}),Object(w.jsx)("div",{className:"py-1",children:Object(w.jsx)(R.a.Item,{children:function(e){var t=e.active;return Object(w.jsx)("a",{href:"#",className:q(t?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:"Send feedback"})}})}),Object(w.jsx)("div",{className:"py-1",children:Object(w.jsx)(R.a.Item,{children:function(e){var t=e.active;return Object(w.jsx)("a",{onClick:function(){return f.reactLocalStorage.set("accessToken",null),void s.push("/signin")},className:q(t?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm cursor-pointer"),children:"Logout"})}})})]})})]})}}),Object(w.jsx)("nav",{className:"px-3 mt-6",children:Object(w.jsx)("div",{className:"space-y-1",children:Q.map((function(e){return Object(w.jsxs)("a",{href:e.href,className:q(i.pathname==e.href?"bg-gray-200 text-gray-900":"text-gray-700 hover:text-gray-900 hover:bg-gray-50","group flex items-center px-2 py-2 text-sm font-medium rounded-md"),"aria-current":i.pathname==e.href?"page":void 0,children:[Object(w.jsx)(e.icon,{className:q(i.pathname==e.href?"text-gray-500":"text-gray-400 group-hover:text-gray-500","mr-3 flex-shrink-0 h-6 w-6"),"aria-hidden":"true"}),e.name]},e.name)}))})})]})]})})]})};var X=s(53),H=s.n(X),Z=s(68),K=s(45),$=s.n(K);function ee(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var te=function(){var e=Object(n.useContext)(h),t=e.currentFile,s=(e.setCurrentFile,f.reactLocalStorage.get("accessToken")),a=Object(n.useState)("notStarted"),i=Object(c.a)(a,2),r=i[0],l=i[1],o=Object(n.useState)([]),d=Object(c.a)(o,2),m=d[0],b=d[1],x=function(){var e=Object(Z.a)(H.a.mark((function e(n,a){var i,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("started"),(i=new FormData).append("inknestFiles",t.file),i.append("shelfUid",n),e.next=6,$.a.getItem("pdfThumbnail");case 6:r=e.sent,i.append("pdfThumbnail",r),u.a.post("".concat("http://146.56.54.187:3001","/file"),i,{headers:{"content-type":'multipart/form-data; boundary=<calculated when request is sent>"',token:s},onUploadProgress:function(e){return console.log(e)}}).then((function(e){l("finished")})).catch((function(e){console.log(e),l("notStarted"),alert("Upload faild")}));case 9:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u.a.get("".concat("http://146.56.54.187:3001","/shelf"),{headers:{token:s}}).then((function(e){console.log(e.data.userShelfs),b(e.data.userShelfs)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){l("notStarted")}),[t]),Object(w.jsx)(R.a,{as:"div",className:"relative inline-block text-left",children:function(e){var t=e.open;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:"notStarted"==r?Object(w.jsxs)(R.a.Button,{className:"overflow-hidden relative space-x-2 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md  text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[Object(w.jsx)("span",{className:"hidden lg:block",children:"Save to shelf"}),Object(w.jsx)("span",{className:"lg:hidden block",children:"Select shelf to save"}),Object(w.jsx)(j.a,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]}):"started"==r?Object(w.jsx)("p",{children:"Uploading..."}):Object(w.jsx)("p",{children:"Upload finished"})}),Object(w.jsx)(T.a,{show:t,as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(w.jsx)(R.a.Items,{static:!0,className:"cursor-pointer origin-top-left absolute left-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:m.map((function(e){return Object(w.jsx)("div",{className:"py-1",children:Object(w.jsx)(R.a.Item,{children:function(t){var s=t.active;return Object(w.jsx)("span",{onClick:function(){x(e.Shelf_UID,e.Shelf_Name)},className:ee(s?"bg-indigo-600 text-white":"text-gray-700","block px-4 py-2 text-sm"),children:e.Shelf_Name})}})})}))})})]})}})},se=function(){var e=f.reactLocalStorage.get("accessToken"),t=Object(n.useContext)(h),s=t.currentFile,a=(t.setCurrentFile,Object(n.useState)(!1)),i=Object(c.a)(a,2),r=i[0],l=i[1],d=Object(o.f)();return s.fileInfo?Object(w.jsxs)("aside",{className:"w-full lg:w-96 bg-transparent p-1 lg:p-8 border-l border-gray-200 overflow-y-auto lg:block absolute bottom-0 lg:relative",children:[Object(w.jsx)("div",{className:"flex justify-center items-center lg:hidden bg-white bg-opacity-0 lg:bg-opacity-100 ",children:Object(w.jsxs)("button",{onClick:function(){return l(!r)},type:"button",className:"shadow-xl m-2 space-x-2 inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r?Object(w.jsx)(j.j,{className:"h-6"}):Object(w.jsx)(m.e,{className:"h-6"}),Object(w.jsx)("span",{children:r?"Close":s.fileInfo.fileUid?"View details":"Save to shelf"})]})}),Object(w.jsxs)("div",{className:"".concat(r?"block":"hidden"," bg-white p-4 lg:p-0 lg:block pb-16 space-y-6"),children:[Object(w.jsx)("div",{className:"mt-0 bg:mt-6 flex items-start justify-between",children:Object(w.jsxs)("div",{className:"space-y-6",children:[Object(w.jsxs)("h2",{className:"text-md lg:text-xl font-medium text-gray-900",children:[Object(w.jsx)("span",{className:"sr-only",children:"Details for "}),s.fileInfo?s.fileInfo.name:null]}),s.fileInfo.fileUid?null:Object(w.jsx)(te,{})]})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{className:"font-medium text-gray-900",children:"File Information"}),Object(w.jsx)("dl",{className:"mt-2 border-t border-b border-gray-200 divide-y divide-gray-200",children:s.fileInfo?Object.keys(s.fileInfo).map((function(e){return"name"!==e?Object(w.jsxs)("div",{className:"py-3 flex justify-between text-sm font-medium",children:[Object(w.jsx)("dt",{className:"text-gray-500",children:e}),Object(w.jsx)("dd",{className:"text-gray-900",children:s.fileInfo[e]})]},e):null})):null}),s.fileInfo.fileUid?Object(w.jsx)("div",{className:"flex justify-end mt-12",children:Object(w.jsx)("button",{onClick:function(){return t=s.fileInfo.fileUid,void(window.confirm("Are you sure you want to delete this book?")&&u.a.delete("".concat("http://146.56.54.187:3001","/file?fileUid=").concat(t),{headers:{token:e}}).then((function(e){console.log(e.data),d.push("/dashboard")})).catch((function(e){return console.log(e)})));var t},type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-gray-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Delete book"})}):null]})]})]}):Object(w.jsx)("aside",{className:"hidden w-96 bg-white p-8 border-l border-gray-200 overflow-y-auto lg:block"})},ne=s(99),ae=(s(171),function(e){var t=e.file;var s=Object(ne.a)(t),n=s.renderTo("viewer",{manager:"continuous",flow:"paginated",width:"100%",height:"100%",snap:!0});s.loaded.navigation.then((function(e){var t=document.getElementById("toc"),s=document.createDocumentFragment();e.forEach((function(e){var t=document.createElement("option");t.textContent=e.label,t.ref=e.href,s.appendChild(t)})),t.appendChild(s),t.onchange=function(){var e=t.selectedIndex,s=t.options[e].ref;return n.display(s),!1}}));n.display();return Object(w.jsxs)("div",{className:"overflow-x-auto",children:[Object(w.jsx)("div",{className:"flex justify-center items-center",children:Object(w.jsxs)("span",{className:"z-50 relative inline-flex shadow-sm rounded-md",children:[Object(w.jsx)("button",{onClick:function(){n.prev()},type:"button",className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Object(w.jsx)(j.b,{className:"h-5 w-5","aria-hidden":"true"})}),Object(w.jsx)("div",{children:Object(w.jsx)("select",{id:"toc",name:"location",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",defaultValue:"Canada"})}),Object(w.jsx)("button",{onClick:function(){return console.log(n),void n.next()},type:"button",className:"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Object(w.jsx)(j.c,{className:"h-5 w-5","aria-hidden":"true"})})]})}),Object(w.jsx)("div",{id:"viewer",className:"epub-renderer"})]})}),ie=s(5),re=s(6);function ce(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),new TextDecoder("utf-8").decode(e)}var le=new DOMParser,oe=function(){function e(t){Object(ie.a)(this,e),this.capacity=t,this.fragment_list=[],this.cur_fragment=new de(t),this.fragment_list.push(this.cur_fragment)}return Object(re.a)(e,[{key:"write",value:function(e){this.cur_fragment.write(e)||(this.cur_fragment=new de(this.capacity),this.fragment_list.push(this.cur_fragment),this.cur_fragment.write(e))}},{key:"get",value:function(e){for(var t=0;t<this.fragment_list.length;){var s=this.fragment_list[t];if(e<s.size)return s.get(e);e-=s.size,t+=1}return null}},{key:"size",value:function(){for(var e=0,t=0;t<this.fragment_list.length;t++)e+=this.fragment_list[t].size;return e}},{key:"shrink",value:function(){for(var e=new Uint8Array(this.size()),t=0,s=0;s<this.fragment_list.length;s++){var n=this.fragment_list[s];n.full()?e.set(n.buffer,t):e.set(n.buffer.slice(0,n.size),t),t+=n.size}return e}}]),e}(),de=function(){function e(t){Object(ie.a)(this,e),this.buffer=new Uint8Array(t),this.capacity=t,this.size=0}return Object(re.a)(e,[{key:"write",value:function(e){return!(this.size>=this.capacity)&&(this.buffer[this.size]=e,this.size+=1,!0)}},{key:"full",value:function(){return this.size===this.capacity}},{key:"get",value:function(e){return this.buffer[e]}}]),e}(),ue=function(){function e(t){Object(ie.a)(this,e),this.view=new DataView(t),this.buffer=this.view.buffer,this.offset=0,this.header=null}return Object(re.a)(e,[{key:"parse",value:function(){}},{key:"getUint8",value:function(){var e=this.view.getUint8(this.offset);return this.offset+=1,e}},{key:"getUint16",value:function(){var e=this.view.getUint16(this.offset);return this.offset+=2,e}},{key:"getUint32",value:function(){var e=this.view.getUint32(this.offset);return this.offset+=4,e}},{key:"getStr",value:function(e){var t=ce(this.buffer.slice(this.offset,this.offset+e));return this.offset+=e,t}},{key:"skip",value:function(e){this.offset+=e}},{key:"setoffset",value:function(e){this.offset=e}},{key:"get_record_extrasize",value:function(e,t){for(var s=e.length-1,n=0,a=15;a>0;a--)if(t&1<<a){var i=this.buffer_get_varlen(e,s),r=i[0],c=i[1];s=i[2],s-=r-c,n+=r}1&t&&(n+=1+(3&e[s]));return n}},{key:"buffer_get_varlen",value:function(e,t){for(var s=0,n=0,a=0,i=0,r=0;;r++){var c=e[t];if(n|=(127&c)<<i,i+=7,s+=1,t-=1,(a+=1)>=4||(128&c)>0)break}return[n,s,t]}},{key:"read_text",value:function(){for(var e=this.palm_header.record_count,t=[],s=1;s<=e;s++)t.push(this.read_text_record(s));var n=function(e){for(var t=0,s=0;s<e.length;s++)t+=(i=e[s]).length;var n=new Uint8Array(t),a=0;for(s=0;s<e.length;s++){var i=e[s];n.set(i,a),a+=i.length}return n}(t);return ce(n)}},{key:"read_text_record",value:function(e){var t=this.mobi_header.extra_flags,s=this.reclist[e].offset,n=this.reclist[e+1].offset,a=new Uint8Array(this.buffer.slice(s,n)),i=this.get_record_extrasize(a,t);if(a=new Uint8Array(this.buffer.slice(s,n-i)),2===this.palm_header.compression){var r=function(e){for(var t=e.length,s=0,n=new oe(e.length);s<t;){var a=e[s];if(s+=1,0==a)n.write(a);else if(a<=8){for(var i=s;i<s+a;i++)n.write(e[i]);s+=a}else if(a<=127)n.write(a);else if(a<=191){var r=e[s];s+=1;var c=(a<<8|r)>>3&2047,l=3+(7&r),o=n.size();for(i=0;i<l;i++)n.write(n.get(o-c)),o+=1}else n.write(32),n.write(128^a)}return n}(a);return r.shrink()}return a}},{key:"read_image",value:function(e){var t=this.mobi_header.first_image_idx,s=this.reclist[t+e].offset,n=this.reclist[t+e+1].offset,a=new Uint8Array(this.buffer.slice(s,n));return new Blob([a.buffer])}},{key:"load",value:function(){this.header=this.load_pdbheader(),this.reclist=this.load_reclist(),this.load_record0()}},{key:"load_pdbheader",value:function(){var e={};return e.name=this.getStr(32),e.attr=this.getUint16(),e.version=this.getUint16(),e.ctime=this.getUint32(),e.mtime=this.getUint32(),e.btime=this.getUint32(),e.mod_num=this.getUint32(),e.appinfo_offset=this.getUint32(),e.sortinfo_offset=this.getUint32(),e.type=this.getStr(4),e.creator=this.getStr(4),e.uid=this.getUint32(),e.next_rec=this.getUint32(),e.record_num=this.getUint16(),e}},{key:"load_reclist",value:function(){for(var e=[],t=0;t<this.header.record_num;t++){var s={};s.offset=this.getUint32(),s.attr=this.getUint32(),e.push(s)}return e}},{key:"load_record0",value:function(){this.palm_header=this.load_record0_header(),this.mobi_header=this.load_mobi_header()}},{key:"load_record0_header",value:function(){var e={},t=this.reclist[0];return this.setoffset(t.offset),e.compression=this.getUint16(),this.skip(2),e.text_length=this.getUint32(),e.record_count=this.getUint16(),e.record_size=this.getUint16(),e.encryption_type=this.getUint16(),this.skip(2),e}},{key:"load_mobi_header",value:function(){var e={},t=this.offset;return e.identifier=this.getUint32(),e.header_length=this.getUint32(),e.mobi_type=this.getUint32(),e.text_encoding=this.getUint32(),e.uid=this.getUint32(),e.generator_version=this.getUint32(),this.skip(40),e.first_nonbook_index=this.getUint32(),e.full_name_offset=this.getUint32(),e.full_name_length=this.getUint32(),e.language=this.getUint32(),e.input_language=this.getUint32(),e.output_language=this.getUint32(),e.min_version=this.getUint32(),e.first_image_idx=this.getUint32(),e.huff_rec_index=this.getUint32(),e.huff_rec_count=this.getUint32(),e.datp_rec_index=this.getUint32(),e.datp_rec_count=this.getUint32(),e.exth_flags=this.getUint32(),this.skip(36),e.drm_offset=this.getUint32(),e.drm_count=this.getUint32(),e.drm_size=this.getUint32(),e.drm_flags=this.getUint32(),this.skip(8),this.skip(4),this.skip(46),e.extra_flags=this.getUint16(),this.setoffset(t+e.header_length),e}},{key:"load_exth_header",value:function(){return{}}},{key:"render_to",value:function(e){this.load();for(var t=this.read_text(),s=document.getElementById(e);s.firstChild;)s.removeChild(s.firstChild);le.parseFromString(t,"text/html").body.childNodes.forEach((function(e){e instanceof Element&&s.appendChild(e)}));for(var n=s.getElementsByTagName("img"),a=0;a<n.length;a++)this.render_image(n,a)}},{key:"render_image",value:function(e,t){var s=e[t],n=+s.getAttribute("recindex"),a=this.read_image(n-1),i=new FileReader;i.onload=function(e){s.src=e.target.result},i.readAsDataURL(a)}}]),e}(),fe=function(e){var t=e.file;return Object(n.useEffect)((function(){new Response(t).arrayBuffer().then((function(e){new ue(e).render_to("book")})).catch((function(e){return console.log(e)}))}),[t]),Object(w.jsx)("div",{id:"book",className:"w-4/6 mt-5"})},he=s(81),me=function(e){var t=e.file,s=Object(n.useState)(null),a=Object(c.a)(s,2),i=(a[0],a[1]),r=Object(n.useState)(1),l=Object(c.a)(r,2),o=l[0],d=l[1],u=Object(n.useState)([1]),f=Object(c.a)(u,2),h=f[0],m=f[1],b=Object(n.useState)(1),x=Object(c.a)(b,2),g=x[0],p=x[1];return t?(Object(n.useEffect)((function(){console.log(h)}),[h]),Object(w.jsxs)("div",{className:"overflow-hidden shadow-2xl",children:[Object(w.jsxs)("div",{className:"z-50 flex justify-center items-center space-x-2",children:[Object(w.jsxs)("span",{className:"z-50 relative inline-flex shadow-sm rounded-md",children:[Object(w.jsx)("button",{onClick:function(){return d((function(e){return e-1}))},type:"button",className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Object(w.jsx)(j.b,{className:"h-5 w-5","aria-hidden":"true"})}),Object(w.jsx)("div",{children:Object(w.jsx)("select",{onChange:function(e){d(Number(e.target.value))},id:"location",name:"location",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",defaultValue:"Canada",children:h.map((function(e){return Object(w.jsxs)("option",{className:"text-center",value:e,children:["page: ",e]},e)}))})}),Object(w.jsx)("button",{onClick:function(){return d((function(e){return e+1}))},type:"button",className:"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Object(w.jsx)(j.c,{className:"h-5 w-5","aria-hidden":"true"})})]}),Object(w.jsxs)("div",{className:"z-50",children:[Object(w.jsx)("span",{className:"relative inline-flex shadow-sm rounded-md",children:Object(w.jsx)("button",{onClick:function(){return p((function(e){return e-.2}))},type:"button",className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Object(w.jsx)(j.l,{className:"h-5 w-5","aria-hidden":"true"})})}),Object(w.jsx)("button",{onClick:function(){return p((function(e){return e+.2}))},type:"button",className:"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:Object(w.jsx)(j.k,{className:"h-5 w-5","aria-hidden":"true"})})]})]}),Object(w.jsx)("div",{className:"overflow-x-auto t-6",children:Object(w.jsx)(he.a,{className:"-mt-10",file:t,onLoadSuccess:function(e){i(e.numPages);for(var t=[],s=1;s<e.numPages;s++)t.push(s);m(t),function(e){return new Promise((function(t,s){var n=function(){var e=Object(Z.a)(H.a.mark((function e(t){var s,n,a,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.getViewport({scale:.6}),n=s.width,a=s.height,(i=document.createElement("canvas")).height=a,i.width=n,e.abrupt("return",t.render({canvasContext:i.getContext("2d"),viewport:s}).promise.then((function(){return i.toDataURL("image/webp",.2)})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();try{e.getPage(1).then(n).then((function(e){t(e)}))}catch(a){s()}}))}(e).then((function(e){$.a.setItem("pdfThumbnail",e)})).catch((function(e){return console.log(e)}))},renderMode:"canvas",children:Object(w.jsx)(he.b,{scale:g,pageNumber:o,renderAnnotationLayer:!1,renderTextLayer:!1})})})]})):Object(w.jsx)(w.Fragment,{children:"No file provided"})},be=function(){var e=Object(n.useContext)(h),t=e.currentFile;e.setCurrentFile;return Object(w.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch overflow-hidden",children:[Object(w.jsx)("main",{className:"flex-1 overflow-y-auto",children:Object(w.jsx)("div",{className:"flex justify-center",children:t.fileInfo?"pdf"===t.fileInfo.type?Object(w.jsx)(me,{file:t.file}):"epub"===t.fileInfo.type?Object(w.jsx)(ae,{file:t.file}):"kindle"===t.fileInfo.type||"mobi"===t.fileInfo.type?Object(w.jsx)(fe,{file:t.file}):"null":null})}),Object(w.jsx)(se,{})]})},xe=s(80),je=s.n(xe),ge=function(){var e=Object(n.useState)("Getting your book ready"),t=Object(c.a)(e,2),s=t[0],a=t[1];return Object(n.useEffect)((function(){var e=0;setInterval((function(){0==e?(a("Please be patient"),e=1):(a("Getting your book ready"),e=0)}),7e3)}),[]),Object(w.jsx)("div",{className:"absolute h-full w-full top-0 left-0 bg-gray-700 z-50 bg-opacity-95",children:Object(w.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center space-y-4",children:[Object(w.jsx)("svg",{className:"spinner h-20 w-20",viewBox:"0 0 50 50",children:Object(w.jsx)("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})}),Object(w.jsx)("p",{className:"text-white text-5xl",children:s})]})})},pe=function(){var e=Object(n.useRef)(null),t=Object(n.useState)([]),s=Object(c.a)(t,2),a=s[0],i=s[1],r=Object(n.useState)(!1),l=Object(c.a)(r,2),o=l[0],d=l[1],f=Object(n.useState)(""),h=Object(c.a)(f,2),m=h[0],b=h[1],x=Object(n.useState)(!1),j=Object(c.a)(x,2),g=j[0],p=j[1];return Object(w.jsxs)("div",{className:"bg-white overflow-y-auto ".concat(a.length?"py-2 sm:py-0":""),children:[Object(w.jsx)("div",{className:"bg-white mb-12 lg:mb-0",children:Object(w.jsx)("header",{className:"py-6",children:Object(w.jsx)("div",{className:"flex justify-between max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)(N,{}),Object(w.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Explore books"})]})})})}),Object(w.jsxs)("div",{className:"relative ".concat(a.length?"sm:py-4":"sm:py-16"),children:[Object(w.jsxs)("div",{"aria-hidden":"true",className:"hidden sm:block ",children:[Object(w.jsx)("div",{className:"absolute inset-y-0 left-0 w-1/2 bg-gray-50 rounded-r-3xl"}),Object(w.jsxs)("svg",{className:"absolute top-8 left-1/2 -ml-3",width:404,height:392,fill:"none",viewBox:"0 0 404 392",children:[Object(w.jsx)("defs",{children:Object(w.jsx)("pattern",{id:"8228f071-bcee-4ec8-905a-2a059a2cc4fb",x:0,y:0,width:20,height:20,patternUnits:"userSpaceOnUse",children:Object(w.jsx)("rect",{x:0,y:0,width:4,height:4,className:"text-gray-200",fill:"currentColor"})})}),Object(w.jsx)("rect",{width:404,height:392,fill:"url(#8228f071-bcee-4ec8-905a-2a059a2cc4fb)"})]})]}),Object(w.jsx)("div",{className:"mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8",children:Object(w.jsxs)("div",{className:"relative rounded-2xl px-6 py-10 bg-indigo-600 overflow-y-auto shadow-xl sm:px-12 sm:py-20",children:[Object(w.jsx)("div",{"aria-hidden":"true",className:"absolute inset-0 -mt-72 sm:-mt-32 md:mt-0",children:Object(w.jsxs)("svg",{className:"absolute inset-0 h-full w-full",preserveAspectRatio:"xMidYMid slice",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 1463 360",children:[Object(w.jsx)("path",{className:"text-indigo-500 text-opacity-40",fill:"currentColor",d:"M-82.673 72l1761.849 472.086-134.327 501.315-1761.85-472.086z"}),Object(w.jsx)("path",{className:"text-indigo-700 text-opacity-40",fill:"currentColor",d:"M-217.088 544.086L1544.761 72l134.327 501.316-1761.849 472.086z"})]})}),Object(w.jsxs)("div",{className:"relative",children:[Object(w.jsxs)("div",{className:"sm:text-center",children:[Object(w.jsx)("h2",{className:"text-3xl font-extrabold text-white tracking-tight sm:text-4xl",children:"Find your favorit books"}),Object(w.jsx)("p",{className:"mt-4 mx-auto max-w-2xl text-lg text-indigo-200",children:"Search in millions of ebook collection"})]}),Object(w.jsxs)("div",{className:"mt-8 sm:mx-auto sm:max-w-lg sm:flex",children:[Object(w.jsxs)("div",{className:"min-w-0 flex-1",children:[Object(w.jsx)("label",{htmlFor:"cta-email",className:"sr-only",children:"Type book title"}),Object(w.jsx)("input",{id:"cta-email",type:"search",className:"block w-full border border-transparent rounded-md px-5 py-3 text-base text-gray-900 placeholder-gray-500 shadow-sm focus:outline-none focus:border-transparent focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigo-600",placeholder:"Type book title",onChange:function(e){return b(e.target.value)}})]}),Object(w.jsx)("div",{className:"mt-4 sm:mt-0 sm:ml-3",children:Object(w.jsx)("button",{onClick:function(){m.length<4||(p(!0),i([]),e.current.scrollIntoView(),u.a.get("".concat("http://146.56.54.187:3001","/search?bookName=").concat(m)).then((function(e){e.data.searchResult.forEach((function(e,t){var s=(new DOMParser).parseFromString(e,"text/html"),n={href:s.querySelector(".file-left a").getAttribute("href"),title:s.querySelector(".file-left .file-img").getAttribute("title"),thumbnail:s.querySelector(".file-left .file-img").getAttribute("src"),size:s.querySelector("span.fi-size").textContent};i((function(e){return[].concat(Object(D.a)(e),[n])})),p(!1)}))})).catch((function(e){console.log(e),p(!1)})))},className:"block w-full rounded-md border border-transparent px-5 py-3 bg-indigo-500 text-base font-medium text-white shadow hover:bg-indigo-400 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigo-600 sm:px-10",children:"Search"})})]})]})]})})]}),Object(w.jsxs)("div",{className:"pt-4 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 overflow-y-auto",children:[o?Object(w.jsx)(ge,{}):null,Object(w.jsx)("h1",{className:"text-xl",children:a.length?"Search result for ".concat(m):g?"Searching for your book...":""}),Object(w.jsx)("section",{className:"mt-8 pb-16","aria-labelledby":"gallery-heading",children:Object(w.jsx)("ul",{role:"list",className:"grid grid-cols-3 gap-x-4 gap-y-8 sm:grid-cols-5 sm:gap-x-6 md:grid-cols-6 lg:grid-cols-5 xl:grid-cols-6 xl:gap-x-8",children:a.length?a.map((function(e,t){return Object(w.jsxs)("li",{className:"relative cursor-pointer",children:[Object(w.jsx)("div",{className:"border-2 border-white focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-indigo-500 group flex flex-col justify-center w-full aspect-w-10 aspect-h-12 rounded-lg bg-gray-100 overflow-hidden shadow-xl",children:Object(w.jsx)("img",{src:e.thumbnail,alt:"",className:"group-hover:opacity-75"})}),Object(w.jsx)("p",{className:"mt-2 block text-sm font-medium text-gray-900 truncate pointer-events-none",children:e.title}),Object(w.jsxs)("div",{className:"flex justify-between items-center",children:[Object(w.jsx)("button",{onClick:function(){var t,s;t=e.href,s=e.title,console.log("sending href ",t),d(!0),u.a.post("".concat("http://146.56.54.187:3001","/getDwonloadLink"),{fileLink:t,bookTitle:s}).then((function(e){console.log(e.data);var t=e.data.fileInfo;d(!1),window.confirm("Download this ebook?")&&window.open(t.fileUrl,"_self")})).catch((function(e){console.log(e),d(!1),alert("Sorry book can not be proccessed. Please try with another item.")}))},type:"button",className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Download"}),Object(w.jsx)("p",{className:"block text-sm font-medium text-gray-500 pointer-events-none",children:e.size})]})]},t)})):Array(10).fill(0).map((function(e,t){return Object(w.jsxs)("div",{className:"".concat(g?"block":"hidden"," px-2 py-2 flex-row justify-center items-center focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-indigo-500 group block w-full aspect-w-10 aspect-h-12 rounded-lg bg-white overflow-hidden shadow-xl"),children:[Object(w.jsx)(je.a,{height:150,count:1}),Object(w.jsx)(je.a,{height:10,count:1})]},t)}))})})]}),Object(w.jsx)("span",{ref:e})]})};var Oe=function(){var e=Object(n.useState)({currentFile:{file:null,fileInfo:null}}),t=Object(c.a)(e,2),s=t[0],a=t[1];return console.log("http://146.56.54.187:3001"),Object(w.jsx)(h.Provider,{value:{currentFile:s,setCurrentFile:a},children:Object(w.jsx)("div",{className:"App relative h-screen flex overflow-hidden bg-white",children:Object(w.jsxs)(l.a,{children:[Object(w.jsx)(V,{}),Object(w.jsx)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden ",children:Object(w.jsxs)(o.c,{children:[Object(w.jsx)(o.a,{path:"/",exact:!0,component:C}),Object(w.jsx)(o.a,{path:"/signin",component:Y}),Object(w.jsx)(o.a,{path:"/signup",component:G}),Object(w.jsx)(o.a,{path:"/mybooks",component:C}),Object(w.jsx)(o.a,{path:"/shelfs",component:P}),Object(w.jsx)(o.a,{path:"/sharedshelfs",component:E}),Object(w.jsx)(o.a,{path:"/fileviewer",component:be}),Object(w.jsx)(o.a,{path:"/explore",component:pe})]})})]})})})},ve=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,185)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),i(e),r(e)}))},ye=Object(p.a)({reducer:{menuState:y}});r.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(g.a,{store:ye,children:Object(w.jsx)(Oe,{})})}),document.getElementById("root")),ve()},95:function(e,t){}},[[180,1,2]]]);
//# sourceMappingURL=main.5225fcce.chunk.js.map