{"version":3,"sources":["tools/currentFileContext.js","tools/formatByte.js","tools/GetFileType.js","redux/menuSlice.js","components/SidebarToggleButton.component.jsx","components/PageTitleAction.component.jsx","pages/MyBooks.page.jsx","assets/book.png","components/UserList.component.jsx","pages/SharedShelfs.page.jsx","pages/Shelfs.page.jsx","pages/Signin.page.jsx","pages/Signup.page.jsx","components/Sidebar.component.jsx","components/SearchHeader.component.jsx","components/ShelfListDropdown.component.jsx","components/DetailsSidebar.component.jsx","components/Viewers/EpubViewer.component.jsx","tools/mobi.js","components/Viewers/MobiViewer.component.jsx","components/Viewers/PdfViewer.component.jsx","pages/FileViewer.page.jsx","pages/Explore.page.jsx","App.js","reportWebVitals.js","redux/store.js","index.js"],"names":["CurrentFileContext","createContext","currentFile","file","fileInfo","setCurrentFile","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getFileType","type","name","split","pop","menuSlice","createSlice","initialState","isOpen","reducers","toggle","state","actions","SidebarToggleButton","dispatch","useDispatch","className","onClick","PageTitleAction","pageTitle","history","useHistory","reactLocalStorage","get","useContext","onChange","e","fileInputValue","target","files","size","formateByte","push","classNames","classes","filter","Boolean","join","MyBooks","query","URLSearchParams","useLocation","search","shelfUidTab","shelfName","sharedBy","accessToken","useState","shelfs","setShelfs","selectedShelfUid","setSelectedShelfUid","filesOfShelf","setFilesOfShelf","selectedFileUid","setSelectedFileUid","useEffect","Shelf_UID","shelfUid","axios","process","headers","then","response","data","catch","err","status","console","arrayOfObjects","byDate","slice","sort","a","b","Shelf_Created_Date","sortShelf","userShelfs","htmlFor","id","defaultValue","map","shelf","Shelf_Name","role","File_UID","fetch","File_Name","res","blob","Original_Name","File_Size","Mimetype","fileUid","openFile","src","alt","UserList","openState","setOpenState","setSelectedUser","userList","setUserList","listVisibility","setListVisibility","searchValue","setSearchValue","filteredUser","setFilteredUser","length","el","Email","includes","First_Name","Last_Name","Root","show","as","Fragment","static","open","onClose","Child","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Overlay","Title","value","placeholder","user","selectedUserUid","User_UID","selectedUserName","dateCreated","SharedShelf","sharedByMeList","setSharedByMeList","shelfList","setShelfList","shelfToShare","setShelfToShare","openCreateNew","setOpenCreateNew","getSharedByMeList","getSharedShelf","usersShelfs","sharedWithMeList","forEach","oldArray","href","Shared_By","shelfDescription","bgColor","sharedShelfUid","Shared_Shelf_UID","style","height","window","confirm","delete","sharedShelf","Shared_With","sharedWithUid","Shared_With_UID","currentUser","jwt_decode","post","userUid","firstName","lastName","alert","Shelfs","shelfNameValue","setShelfNameValue","shelfDescriptionValue","setShelfDescriptionValue","enabled","setEnabled","getUserShelf","initials","Is_Open","Shelf_Description","handleCreateNewShelf","preventDefault","put","onSubmit","rows","Group","Label","passive","Description","checked","Signin","action","elements","email","password","msg","set","handleSignin","autoComplete","required","to","Signup","handleSignup","navigation","icon","BookOpenIcon","FolderIcon","FolderDownloadIcon","SearchIcon","teams","bgColorClass","Sidebar","menuState","useSelector","closeSideBar","location","pathname","item","undefined","team","Button","Items","Item","active","ShelfListDropdown","uploadingState","setUploadingState","setUserShelfs","uploadBook","selectedShelfName","formData","FormData","append","localforage","getItem","pdfThumbnail","onUploadProgress","progress","DetailsSidebar","openDetails","setOpenDetails","Object","keys","key","EpubViewer","document","getElementsByClassName","parentNode","removeChild","removeElementsByClass","ePubInstance","ePub","rendition","renderTo","manager","flow","width","snap","loaded","toc","$select","getElementById","docfrag","createDocumentFragment","chapter","option","createElement","textContent","label","ref","appendChild","onchange","index","selectedIndex","url","options","display","prev","next","ab2str","buf","ArrayBuffer","Uint8Array","TextDecoder","decode","domParser","DOMParser","Buffer","capacity","this","fragment_list","cur_fragment","byte","write","idx","fi","frag","s","total_buffer","offset","full","buffer","MobiFile","view","DataView","header","v","getUint8","getUint16","getUint32","_of","flags","pos","extra","buffer_get_varlen","l","byte_count","shift","text_end","palm_header","record_count","buffers","read_text_record","all","total_size","combine_uint8array","mobi_header","extra_flags","begin","reclist","end","ex","get_record_extrasize","compression","char","distance","lz_length","buffer_size","uncompression_lz77","shrink","first_image_idx","Blob","load_pdbheader","load_reclist","load_record0","getStr","attr","version","ctime","mtime","btime","mod_num","appinfo_offset","sortinfo_offset","creator","uid","next_rec","record_num","record","load_record0_header","load_mobi_header","p_header","first_record","setoffset","skip","text_length","record_size","encryption_type","start_offset","identifier","header_length","mobi_type","text_encoding","generator_version","first_nonbook_index","full_name_offset","full_name_length","language","input_language","output_language","min_version","huff_rec_index","huff_rec_count","datp_rec_index","datp_rec_count","exth_flags","drm_offset","drm_count","drm_size","drm_flags","load","content","read_text","bookDom","firstChild","parseFromString","body","childNodes","x","Element","imgDoms","getElementsByTagName","render_image","imgDom","getAttribute","read_image","imgReader","FileReader","onload","result","readAsDataURL","MobiViewer","Response","arrayBuffer","render_to","numPages","setNumPages","pageNumber","setPageNumber","pageList","setPageList","scale","setScale","Number","val","onLoadSuccess","doc","pl","Promise","resolve","reject","imageMaker","page","viewPort","getViewport","widht","canvas","render","canvasContext","getContext","viewport","promise","toDataURL","getPage","thumbmaker","imageDataUri","setItem","renderMode","renderAnnotationLayer","renderTextLayer","FileViewer","Loading","setMsg","setInterval","class","viewBox","cx","cy","r","fill","Explore","myRef","useRef","searchResult","setSearchResult","loading","setLoading","bookName","setBookName","searchLoading","setSearchLoading","y","patternUnits","preserveAspectRatio","xmlns","d","current","scrollIntoView","listHtml","element","querySelector","title","thumbnail","prevValue","errorTimeout","setTimeout","clearTimeout","fileUrl","getDownloadLink","Array","count","App","Provider","path","exact","component","SharedShelfs","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","configureStore","reducer","menuReducer","ReactDOM","StrictMode","store"],"mappings":"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","file":"static/js/main.96b55ff3.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\n// read this to know how context can be used\r\n// https://dmitripavlutin.com/react-context-and-usecontext/\r\nconst CurrentFileContext = createContext({\r\n    currentFile: {\r\n        // file blob\r\n        file: null,\r\n        // file information object\r\n        fileInfo: null\r\n    },\r\n    setCurrentFile: (currentFile)=>{}\r\n});\r\n\r\nexport default CurrentFileContext;","const formatBytes = (bytes, decimals = 2) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n\r\n    const k = 1024;\r\n    const dm = decimals < 0 ? 0 : decimals;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n}\r\nexport default formatBytes;","const getFileType = (file) => {\r\n    if(file.type){\r\n        switch(file.type){\r\n            case \"application/pdf\":\r\n                return \"pdf\"\r\n            case \"application/x-mobipocket-ebook\":\r\n                return \"mobi\"\r\n            case \"application/octet-stream\":\r\n                return \"kindle\"\r\n            case \"application/epub+zip\":\r\n                return \"epub\"\r\n            default:\r\n                return \"\"\r\n        }\r\n    }else{\r\n        const ext = file.name.split(\".\").pop();\r\n        \r\n        switch(ext){\r\n            case \"pdf\":\r\n                return \"pdf\"\r\n            case \"mobi\":\r\n                return \"mobi\"\r\n            case \"azw3\":\r\n                return \"kindle\"\r\n            case \"epub\":\r\n                return \"epub\"\r\n            default:\r\n                return \"\"\r\n        }\r\n    }\r\n}\r\n\r\nexport default getFileType;","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const menuSlice = createSlice({\r\n    name: \"menuState\",\r\n    initialState: {\r\n        isOpen: false\r\n    },\r\n    reducers: {\r\n        toggle: (state) => {\r\n            state.isOpen = !state.isOpen\r\n        }\r\n    }\r\n});\r\n\r\nexport const {toggle} = menuSlice.actions;\r\nexport default menuSlice.reducer;","import { MenuAlt1Icon, MenuAlt2Icon, MenuAlt3Icon } from '@heroicons/react/outline'\r\nimport {\r\n  SearchIcon,\r\n} from '@heroicons/react/solid'\r\nimport { useDispatch } from 'react-redux'\r\nimport { toggle } from '../redux/menuSlice'\r\n\r\nconst SidebarToggleButton = () => {\r\n    const dispatch = useDispatch();\r\n    const setSidebarOpen = () =>{\r\n        dispatch(toggle());\r\n    }\r\n\r\n    return (\r\n        <button\r\n            className=\"pr-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple-500 lg:hidden\"\r\n            onClick={() => setSidebarOpen(true)}\r\n        >\r\n            <span className=\"sr-only\">Open sidebar</span>\r\n            <MenuAlt1Icon className=\"h-6 w-6\" aria-hidden=\"true\" />\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default SidebarToggleButton;","import { useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { reactLocalStorage } from \"reactjs-localstorage\";\r\nimport CurrentFileContext from \"../tools/currentFileContext\";\r\nimport { MenuAlt2Icon, PlusIcon as PlusIconOutline } from '@heroicons/react/outline'\r\nimport formateByte from \"../tools/formatByte\";\r\nimport getFileType from \"../tools/GetFileType\";\r\nimport SidebarToggleButton from \"./SidebarToggleButton.component\";\r\n\r\nconst PageTitleAction = ({pageTitle}) => {\r\n    const history = useHistory();\r\n    const accessToken = reactLocalStorage.get(\"accessToken\");\r\n    const { currentFile, setCurrentFile } = useContext(CurrentFileContext);\r\n\r\n    const handleFileDialog = (e) => {\r\n        const fileInputValue = e.target.files[0];\r\n\r\n        setCurrentFile({\r\n            file: fileInputValue,\r\n            fileInfo: {\r\n                name: fileInputValue.name,\r\n                size: formateByte(fileInputValue.size),\r\n                type: getFileType(fileInputValue)\r\n            }\r\n        });\r\n        history.push(\"/fileviewer\");\r\n    }\r\n\r\n    return (\r\n        <div className=\"px-4 py-4 flex items-center justify-between sm:px-6 lg:px-8\">\r\n            <SidebarToggleButton />\r\n            <div className=\"flex-1 min-w-0\">\r\n                <h1 className=\"text-lg font-medium leading-6 text-gray-900 sm:truncate\">{pageTitle}</h1>\r\n            </div>\r\n            <div className=\"mt-4 flex sm:mt-0 sm:ml-4\">\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"space-x-2 order-0 inline-flex items-center px-3 py-1 lg:px-3 lg:py-1 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:order-1 sm:ml-3\"\r\n                >\r\n                    <PlusIconOutline className=\"h-6 w-6\" aria-hidden=\"true\" />\r\n                    <input onChange={handleFileDialog} className=\"absolute opacity-0\" type=\"file\" />\r\n                    <span>Add book</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PageTitleAction;","import axios from \"axios\";\r\nimport { useContext, useState, useEffect } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { reactLocalStorage } from \"reactjs-localstorage\";\r\nimport PageTitleAction from \"../components/PageTitleAction.component\";\r\nimport CurrentFileContext from \"../tools/currentFileContext\";\r\nimport formatBytes from \"../tools/formatByte\";\r\nimport { UserIcon } from \"@heroicons/react/solid\";\r\nimport bookimage from \"../assets/book.png\"\r\nimport SidebarToggleButton from \"../components/SidebarToggleButton.component\";\r\n\r\nfunction classNames(...classes) {\r\n    return classes.filter(Boolean).join(' ')\r\n}\r\n\r\nconst sortShelf = (arrayOfObjects) => {\r\n    var byDate = arrayOfObjects.slice(0);\r\n    byDate.sort(function (a, b) {\r\n        return b.Shelf_Created_Date - a.Shelf_Created_Date;\r\n    });\r\n    return byDate;\r\n}\r\n\r\nconst MyBooks = () => {\r\n    function useQuery() {\r\n       return new URLSearchParams(useLocation().search);\r\n    }\r\n    \r\n    const query = useQuery();\r\n    const shelfUidTab = query.get(\"shelfUidTab\");\r\n    const shelfName = query.get(\"shelfName\");\r\n    const sharedBy = query.get(\"sharedBy\");\r\n    \r\n    const accessToken = reactLocalStorage.get(\"accessToken\");\r\n    const [shelfs, setShelfs] = useState([]);\r\n    const [selectedShelfUid, setSelectedShelfUid] = useState(shelfs[0]);\r\n    const [filesOfShelf, setFilesOfShelf] = useState([]);\r\n    const [selectedFileUid, setSelectedFileUid] = useState(\"\");\r\n\r\n    const { currentFile, setCurrentFile } = useContext(CurrentFileContext);\r\n\r\n    const history = useHistory();\r\n\r\n    // Get all books of current user\r\n    const getUserShelf = () => {\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/shelf`, {\r\n            headers: {\r\n                \"token\": accessToken\r\n            },\r\n        }).then((response) => {\r\n            setShelfs(sortShelf(response.data.userShelfs));\r\n        }).catch(err => console.log(err))\r\n    }\r\n\r\n    const getFilesByShelfUid = (shelfUid) => {\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/file?shelfUid=${shelfUid}`, {\r\n            headers: { \"token\": accessToken }\r\n        }).then((response) => {\r\n            // server sends 404 status code if there is no book in this shelf\r\n            setFilesOfShelf(response.data);\r\n            \r\n            // setFilesOfShelf(response.data)\r\n        }).catch(err => {\r\n            if (err.response.status == 404) {\r\n                console.log(\"No books found in this shelf\");\r\n                setFilesOfShelf([]);\r\n            }\r\n        });\r\n    }\r\n\r\n    const openFile = (file) => {\r\n        fetch(`${process.env.REACT_APP_SERVER_URL}/file/get-file-url?token=${accessToken}&fileName=${file.File_Name}`)\r\n            .then(res => res.blob())\r\n            .then(blob => {\r\n                setCurrentFile({\r\n                    file: blob,\r\n                    fileInfo: {\r\n                        name: file.Original_Name,\r\n                        size: formatBytes(file.File_Size),\r\n                        type: file.Mimetype,\r\n                        fileUid: file.File_UID,\r\n                    }\r\n                });\r\n                history.push(\"/fileviewer\");\r\n            })\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (shelfs[0] && !shelfUidTab) {\r\n            setSelectedShelfUid(shelfs[0].Shelf_UID)\r\n        }\r\n    }, [shelfs])\r\n\r\n    useEffect(() => {\r\n        // get books of shelected shelf\r\n        if (selectedShelfUid) {\r\n            getFilesByShelfUid(selectedShelfUid);\r\n        }\r\n    }, [selectedShelfUid]);\r\n\r\n\r\n    useEffect(() => {\r\n        getUserShelf();\r\n        if (shelfUidTab) {\r\n            setSelectedShelfUid(shelfUidTab);\r\n        }\r\n        setCurrentFile({})\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"max-w-7xl sm:px-6 lg:px-8\">\r\n            \r\n            {\r\n                shelfName && sharedBy\r\n                    ? <div className=\"flex\">\r\n                        <h1 className=\"flex-1 text-xl font-bold text-gray-900\">{shelfName}</h1>\r\n                        <div className=\"text-indigo-700 flex items-center space-x-2\">\r\n                            <UserIcon className=\"h-4 w-4 inline\" /> \r\n                            <span>{sharedBy}</span>\r\n                        </div>\r\n                    </div>\r\n                    :<PageTitleAction pageTitle=\"My books\" />\r\n            }\r\n\r\n            {/* Tabs */}\r\n            <div className=\"mt-3 sm:mt-2\">\r\n                <div className=\"sm:hidden\">\r\n                    <label htmlFor=\"tabs\" className=\"sr-only\">\r\n                        Select a shelf\r\n                    </label>\r\n                    <select\r\n                        id=\"tabs\"\r\n                        name=\"tabs\"\r\n                        className=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n                        defaultValue=\"Recently Viewed\"\r\n                    >\r\n                        {\r\n                            shelfs.map((shelf) => (\r\n                                <option onClick={() => setSelectedShelfUid(shelf.Shelf_UID)} key={shelf.Shelf_UID}>{shelf.Shelf_Name}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n                </div>\r\n                <div className=\"hidden sm:block\">\r\n                    <div className=\"flex items-center border-b border-gray-200\">\r\n                        <nav className=\"flex-1 -mb-px flex space-x-6 xl:space-x-8\" aria-label=\"Tabs\">\r\n                            {shelfs.map((shelf) => (\r\n                                <button\r\n                                    onClick={() => setSelectedShelfUid(shelf.Shelf_UID)}\r\n                                    key={shelf.Shelf_UID}\r\n                                    className={classNames(\r\n                                        shelf.Shelf_UID == selectedShelfUid\r\n                                            ? 'border-indigo-500 text-indigo-600'\r\n                                            : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\r\n                                        'whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm'\r\n                                    )}\r\n                                >\r\n                                    {shelf.Shelf_Name}\r\n                                </button>\r\n                            ))}\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Gallery */}\r\n            <section className=\"mt-8 pb-16\" aria-labelledby=\"gallery-heading\">\r\n                <ul\r\n                    role=\"list\"\r\n                    className=\"grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8\"\r\n                >\r\n                    {filesOfShelf.map((file) => (\r\n                        <li onClick={() => {\r\n                            setSelectedFileUid(file.File_UID);\r\n                            openFile(file);\r\n                        }} key={file.File_UID} className=\"relative\">\r\n                            <div\r\n                                className={classNames(\r\n                                    file.File_UID == selectedFileUid\r\n                                        ? 'ring-2 ring-offset-2 ring-indigo-500'\r\n                                        : 'focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-indigo-500',\r\n                                    'group block w-full aspect-w-10 aspect-h-12 rounded-lg bg-gray-100 overflow-hidden shadow-xl cursor-pointer'\r\n                                )}\r\n                            >\r\n\r\n                                {\r\n                                    file.Mimetype == \"pdf\"\r\n                                        ? <img\r\n                                            src={`${process.env.REACT_APP_SERVER_URL}/file/get-thumbnail-url?token=${accessToken}&fileName=${file.File_Name}`}\r\n                                            alt=\"\"\r\n                                            className={classNames(\r\n                                                file.File_UID == selectedFileUid ? '' : 'group-hover:opacity-75',\r\n                                                'object-cover pointer-events-none'\r\n                                            )}\r\n                                        />\r\n                                        : <img\r\n                                            src={bookimage}\r\n                                            alt=\"\"\r\n                                            className={classNames(\r\n                                                file.File_UID == selectedFileUid ? '' : 'group-hover:opacity-75',\r\n                                                'object-cover pointer-events-none'\r\n                                            )}\r\n                                        />\r\n                                }\r\n                                <button type=\"button\" className=\"absolute inset-0 focus:outline-none\">\r\n                                    <span className=\"sr-only\">View details for {file.File_Name}</span>\r\n                                </button>\r\n                            </div>\r\n                            <p className=\"mt-2 block text-sm font-medium text-gray-900 truncate pointer-events-none\">\r\n                                {file.Original_Name}\r\n                            </p>\r\n                            <p className=\"block text-sm font-medium text-gray-500 pointer-events-none\">{formatBytes(file.File_Size)}</p>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyBooks;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAHYgAAB2IBOHqZ2wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAdwSURBVHic7dzNj111Hcfxz+/ODDPttLVShVIfgu0U+gAKjtMEpiSTqPwLLiVxgRsCK02QxJDIhsSExIXBxMSlcSuJCzaVUiDGBOICJWlYEAJRwGpKoWXmnp+LaYVqoZTezrlzf6/Xrnduzvlm5tx3z+NNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4OqVvgeYRCsrdXo4fO/rtdbr+55lEpRS/jk1tfUvx46Vtb5nmTQCMGLLy2f2JPXpJIf6nmXCvDwYlO8cPz7/Zt+DTJJB3wNMmlrzk/jwXwuHui4P9z3EpBGAESulHux7hslVD/c9waQRgNFzWHXt+N2O2HTfA7Sg25vUbR/+u5xLBq9c/J65ueS226Y2drAxdvp0zSuvdH2PMfEEYAOsfr9k+JGd18HrydxD9aL37N49yBNPzG3wZOPrxReHeeCBs32PMfEcAkDDBAAaJgDQMAGAhgkANEwAoGECAA0TAGiYAEDDBAAaJgDQMM8CTIjV1eStt+rl37gBpqeTG27w4N5mIAAT4JlnhnnssXM5c2Y8ApAkCwuDPP74nBCMOYcAm9zqasbuw58kJ092efLJD/oeg8sQgE3uzTe7sfvwX3DypOf5x50AbHLdGH/GhsO+J+BynAOYRNNJ3bXB61xLyjsbvE6umgBMoG53cvaJjT35dqlvOWL8OQSAhgkANEwAoGECAA0TAGiYAEDDBAAaJgDQMAGAhgkANEwAoGGeBZhAg78ncz/a4PvyVzd2dYyGAEyi1WTwat9DsBk4BNjkBmP8F5ya6nsCLmeMNx8+jZtuGmR+fjy/d29hweY17vyFNrmZmeSRR2bHLgILC4Pcf/91fY/BZTgHMAHuuWcqTz21Na+91mVtre9pku3bS/bsGa8gcWkCMCFmZpJ9++zQcWVsMdAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgAQMMEABomANAwAYCGCQA0TACgYQIADRMAaJgA9KDO/v9rW7Zs/BwgAD2oX0jqly5+7ciRqX6GoWnTfQ/QpJKcfbhk5rc1N79d8u0j07nvvuv6nooGCUBP6o3JBw+W/GDnbL47539/+uEQABomANAwAYCGCQA0TACgYQIADXMZcAPM/rR+7M8ezdk8uoGzwEfZA4CGCcCIlZJzfc8wwT7oe4BJIwCj93TfA0yu8se+J5g0AjBip07N/6KU8svEnsColJJ/11p/tWPH1p/3PcukKX0PMKkWF+vM3Ny7t5QyWO66erSULCY5kBFGt34+6fYm3b6k21vSHUjqtlEt/dqrqb976aZt3+t7jpYJwAZaXn5reymz30gGi12XxfNRODTKddQbk+GtSd2XDPcl3b6SzIxyDaMjAP0TgJ4tL5/ZU2uWBoNuqdZyJMlSkp2jWn6dTurXkm6hpFtYj0Ldk94P/so7yeBPeW7213nwxIn5P/c7TbsEYOzUcvTo6f21DpbWw1CXai13JhnddwZtXT9sGO5Luv3rcai7Rrb0y5p6uWb2sfz3LEkpefzZZ7f9eOMm4AIB2ARWVur06uq7t5ZSFpMs1loWk7qUZGTfIlK3Jt1C0h04fz7hlqTuGNXSLzb7s5qply56qUve33nixBdPX5s18nEEYJO69946f+bM6W/WOlgaDLJUa1laP/IfnXpTOb+XUFMXkuHNJbnE9xleqbmHagavX/zacFgPvfDC9r9e/dK5EgIwQRYX//m5LVumb08Gi7WW5aTek2T3yFYwSLo961ceLpxkrAsl9QpvKL9UAAaDevj48e0vj2xWPhUBmHDLy2f2rF9t6Ba7riyWkruTXD+yFUwn3VeT7mBZvyS5N+m+nE/csgRgfHgYaMKdODH/RpI3kvz+wmtHj57dm6wdzYfnExaTzH2mFawlg1eTwasfeeBpazL8SkldSLoDNcODJXVk1zUYJXsA5PDhet2OHe/fMTU1PH8uIUsZ9U1Lu85fityfTP+hprxz8c/tAfRDALiklZV/bFtbm7vjf25aOphrtM0IQD8EgE9tZeXUzrW1mW8l9ej58wlHktwwimULQD8EgKty993/2pdMLZVSjiRlKal3Jpm/0uV0XXfw+ed3/O0ajMgnEABGamWlTg+HZw51XVmqtTtSSllKcns++YTzezMz87uOHStnN2hMzhMArrm77qpbktN3Tk2t396c9ZOM+7O+/Z2rNT987rltv+l1yEYJAL1YWTm1c3V19sDMzNrJY8d2vN33PAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBn9x/mA4lo+T1PLwAAAABJRU5ErkJggg==\"","/* This example requires Tailwind CSS v2.0+ */\r\nimport { useState, useEffect, useRef, Fragment } from 'react';\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { CheckIcon, SearchCircleIcon, ShareIcon, UserIcon } from '@heroicons/react/outline'\r\nimport axios from 'axios';\r\nimport { reactLocalStorage } from 'reactjs-localstorage';\r\n\r\nexport default function UserList({ openState, setOpenState, setSelectedUser }) {\r\n    const accessToken = reactLocalStorage.get(\"accessToken\");\r\n    const [userList, setUserList] = useState([]);\r\n    const [listVisibility, setListVisibility] = useState(false);\r\n    const [searchValue, setSearchValue] = useState([]);\r\n    const [filteredUser, setFilteredUser] = useState([]);\r\n\r\n    const getAllUsers = () => {\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/listusers`, {\r\n            headers: { \"token\": accessToken }\r\n        }).then(response => {\r\n            console.log(response.data.userList)\r\n            setUserList(response.data.userList);\r\n        }).catch(err => console.log(err))\r\n    }\r\n\r\n    useEffect(() => {\r\n        getAllUsers();\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        if(searchValue.length > 2){\r\n            setFilteredUser(userList.filter(function (el) {\r\n                return el.Email.includes(searchValue)\r\n                    || el.First_Name.includes(searchValue)\r\n                    || el.Last_Name.includes(searchValue) \r\n            }));\r\n            setListVisibility(true);\r\n        }else{\r\n            setListVisibility(false);\r\n        }\r\n        \r\n    }, [searchValue]);\r\n\r\n\r\n    return (\r\n        <Transition.Root show={openState} as={Fragment}>\r\n            <Dialog as=\"div\" static className=\"fixed z-10 inset-0 overflow-y-auto\" open={openState} onClose={setOpenState}>\r\n                <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n                    <Transition.Child\r\n                        as={Fragment}\r\n                        enter=\"ease-out duration-300\"\r\n                        enterFrom=\"opacity-0\"\r\n                        enterTo=\"opacity-100\"\r\n                        leave=\"ease-in duration-200\"\r\n                        leaveFrom=\"opacity-100\"\r\n                        leaveTo=\"opacity-0\"\r\n                    >\r\n                        <Dialog.Overlay className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\r\n                    </Transition.Child>\r\n\r\n                    {/* This element is to trick the browser into centering the modal contents. */}\r\n                    <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">\r\n                        &#8203;\r\n                    </span>\r\n                    <Transition.Child\r\n                        as={Fragment}\r\n                        enter=\"ease-out duration-300\"\r\n                        enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\r\n                        enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\r\n                        leave=\"ease-in duration-200\"\r\n                        leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\r\n                        leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\r\n                    >\r\n                        <div className=\"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6\">\r\n                            <div>\r\n                                <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100\">\r\n                                    <ShareIcon className=\"h-6 w-6 text-green-600\" aria-hidden=\"true\" />\r\n                                </div>\r\n                                <div className=\"mt-3 sm:mt-5\">\r\n                                    <Dialog.Title as=\"h3\" className=\"text-center text-lg leading-6 font-medium text-gray-900\">\r\n                                        Select user to share with\r\n                                    </Dialog.Title>\r\n\r\n                                    \r\n                                    <div className=\"mt-1 flex rounded-md shadow-sm\">\r\n                                        <div className=\"relative flex items-stretch flex-grow focus-within:z-10\">\r\n                                            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                                <SearchCircleIcon className=\"h-6 w-6 text-gray-400\" aria-hidden=\"true\" />\r\n                                            </div>\r\n                                            <input\r\n                                                onChange={(e)=>{setSearchValue(e.target.value)}}\r\n                                                type=\"text\"\r\n                                                className=\"h-8 focus:ring-indigo-500 focus:border-indigo-500 block w-full rounded-none rounded-l-md pl-10 sm:text-sm border-gray-300\"\r\n                                                placeholder=\"Search by name or email\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    {listVisibility\r\n                                        ? <div className=\"mt-2\">\r\n                                            <ul className=\"divide-y divide-gray-200\">\r\n                                                {filteredUser.map((user) => (\r\n                                                    <li\r\n                                                     onClick={()=>{\r\n                                                        setSelectedUser({\r\n                                                            selectedUserUid: user.User_UID, \r\n                                                            selectedUserName: user.First_Name + \" \" + user.Last_Name\r\n                                                        })\r\n                                                     }}\r\n                                                     key={user.User_UID} className=\"py-4 cursor-pointer hover:bg-gray-100\">\r\n                                                        <div className=\"flex space-x-3\">\r\n                                                            {/* <img className=\"h-6 w-6 rounded-full\" src={user.First_Name} alt=\"\" /> */}\r\n                                                            <UserIcon className=\"h-6 w-6 rounded-full\" aria-hidden=\"true\" />\r\n\r\n                                                            <div className=\"flex-1 space-y-1\">\r\n                                                                <div className=\"flex items-center justify-between\">\r\n                                                                    <h3 className=\"text-sm font-medium\">{user.First_Name + \" \" + user.Last_Name}</h3>\r\n                                                                    {/* <p className=\"text-sm text-gray-500\">{user.Email}</p> */}\r\n                                                                </div>\r\n                                                                <p className=\"text-sm text-gray-500\">\r\n                                                                    Email: {user.Email}\r\n                                                                </p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                        : null}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Transition.Child>\r\n                </div>\r\n            </Dialog>\r\n        </Transition.Root>\r\n    )\r\n}","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { TrashIcon, FolderOpenIcon, ShareIcon, UserIcon, XCircleIcon } from '@heroicons/react/solid';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { reactLocalStorage } from \"reactjs-localstorage\";\r\nimport UserList from \"../components/UserList.component\";\r\nimport SidebarToggleButton from \"../components/SidebarToggleButton.component\";\r\n\r\nconst sortShelf = (arrayOfObjects) => {\r\n    var byDate = arrayOfObjects.slice(0);\r\n    byDate.sort(function (a, b) {\r\n        return b.dateCreated - a.dateCreated;\r\n    });\r\n    return byDate;\r\n}\r\n\r\nfunction classNames(...classes) {\r\n    return classes.filter(Boolean).join(' ')\r\n}\r\n\r\nconst SharedShelf = () => {\r\n    const accessToken = reactLocalStorage.get(\"accessToken\");\r\n    const [sharedByMeList, setSharedByMeList] = useState([]);\r\n    const [shelfList, setShelfList] = useState([]);\r\n    const [shelfToShare, setShelfToShare] = useState({});\r\n\r\n    // user list modal open state\r\n    const [openState, setOpenState] = useState(false);\r\n\r\n    const [openCreateNew, setOpenCreateNew] = useState(false);\r\n\r\n    const getSharedByMeList = () => {\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/shared-by-me`, {\r\n            headers: { \"token\": accessToken }\r\n        }).then((response) => {\r\n            setSharedByMeList(response.data.sharedByMeList)\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    // Handle share shelf\r\n    const setSelectedUser = ({ selectedUserUid, selectedUserName }) => {\r\n        var currentUser = jwt_decode(accessToken);\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/share`, {\r\n            \"shelfUid\": shelfToShare.shelfUid,\r\n            \"sharedByUid\": currentUser.userUid,\r\n            \"sharedWithUid\": selectedUserUid,\r\n            \"shelfName\": shelfToShare.shelfName,\r\n            \"sharedBy\": currentUser.firstName + \" \" + currentUser.lastName,\r\n            \"sharedWith\": selectedUserName\r\n        }, {\r\n            headers: { \"token\": accessToken }\r\n        }).then(response => {\r\n            console.log(response.data);\r\n            alert(\"Shelf has been shared successfully with \" + selectedUserName);\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n\r\n\r\n    const handleUnshare = (sharedWithUid, sharedShelfUid) => {\r\n        let confirmUnshare = window.confirm(\"Unshare this shelf?\");\r\n        if (confirmUnshare) {\r\n            axios.delete(`${process.env.REACT_APP_SERVER_URL}/share?sharedWithUid=${sharedWithUid}&sharedShelfUid=${sharedShelfUid}`, {\r\n                headers: { \"token\": accessToken }\r\n            }).then(response => {\r\n                getSharedByMeList();\r\n            }).catch(err => console.log(err));\r\n        }\r\n    }\r\n\r\n    const getSharedShelf = () => {\r\n        setShelfList([]);\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/shared-with-me`, {\r\n            headers: {\r\n                \"token\": accessToken\r\n            },\r\n        }).then((response) => {\r\n            console.log(response.data)\r\n            const usersShelfs = response.data.sharedWithMeList;\r\n            console.log(usersShelfs);\r\n            if (usersShelfs.length > 0) {\r\n                usersShelfs.forEach((shelf) => {\r\n                    setShelfList(oldArray => [\r\n                        ...oldArray,\r\n                        {\r\n                            name: shelf.Shelf_Name,\r\n                            href: `${process.env.REACT_APP_APP_URL}/mybooks?shelfUidTab=${shelf.Shelf_UID}&shelfName=${shelf.Shelf_Name}&sharedBy=${shelf.Shared_By}`,\r\n                            shelfDescription: shelf.Shared_By,\r\n                            bgColor: \"bg-blue-400\",\r\n                            sharedShelfUid: shelf.Shared_Shelf_UID,\r\n                            shelfUid: shelf.Shelf_UID,\r\n                            dateCreated: shelf.Shelf_Created_Date\r\n                        }\r\n                    ]);\r\n                })\r\n            }\r\n\r\n        }).catch(err => console.log(err))\r\n    }\r\n\r\n    const handleDeleteSharedWithMe = (sharedShelfUid) => {\r\n        let confirmUnshare = window.confirm(\"Remove this shared shelf?\");\r\n        if (confirmUnshare) {\r\n            axios.delete(`${process.env.REACT_APP_SERVER_URL}/shared-with-me?sharedShelfUid=${sharedShelfUid}`, {\r\n                headers: { \"token\": accessToken }\r\n            }).then(response => {\r\n                console.log(response.data)\r\n                getSharedShelf();\r\n            }).catch(err => console.log(err));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getSharedByMeList();\r\n        getSharedShelf();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"bg-gray-200 pb-32\">\r\n\r\n                <header className=\"py-6\">\r\n                <div className=\"flex justify-between max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                        <div className=\"flex\">\r\n                            <SidebarToggleButton />\r\n                            <h1 className=\"text-2xl font-bold text-gray-800\">\r\n\r\n                                Shared Shelfs\r\n                            </h1>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setOpenCreateNew(!openCreateNew)}\r\n                            type=\"button\"\r\n                            className=\"inline-flex lg:hidden space-x-2 items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                        >\r\n                            {openCreateNew ? <XCircleIcon className=\"h-6\" /> : null}\r\n                            <span>{openCreateNew ? \"Close\" : \"View shared by me\"}</span>\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n            </div>\r\n\r\n            <main className=\"-mt-32\">\r\n                <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:max-w-7xl lg:px-8\">\r\n                    <div className=\"max-w-7xl mx-auto pb-12 px-4 sm:px-6 lg:px-8\">\r\n                        {/* Main 2 column grid */}\r\n                        <div className=\"grid grid-cols-1 gap-2 items-start lg:grid-cols-3 lg:gap-2\">\r\n                            {/* Left column */}\r\n                            <div className={\r\n                                openCreateNew ? \"hidden lg:block grid-cols-1 gap-4 lg:col-span-2\"\r\n                                    : \"grid grid-cols-1 gap-4 lg:col-span-2\"\r\n                            }>\r\n                                <section aria-labelledby=\"section-1-title\">\r\n                                    <div className=\"rounded-lg bg-white overflow-y-auto shadow \" style={{ height: \"calc(100vh - 100px)\" }}>\r\n                                        {/* Grid list */}\r\n                                        <div>\r\n                                            <ul className=\"m-6 mt-8 grid grid-cols-1 gap-5 sm:gap-6 sm:grid-cols-2 lg:grid-cols-2\">\r\n                                                {sortShelf(shelfList).map((shelf) => (\r\n                                                    <li key={shelf.sharedShelfUid} className=\"col-span-1 flex shadow-sm rounded-md\">\r\n                                                        <div\r\n                                                            className={classNames(\r\n                                                                shelf.bgColor,\r\n                                                                'flex-shrink-0 flex items-center justify-center w-12 text-white text-sm font-medium rounded-l-md'\r\n                                                            )}\r\n                                                        >\r\n                                                            <FolderOpenIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                        </div>\r\n                                                        <div className=\"flex-1 flex items-center justify-between border-t border-r border-b border-gray-200 bg-white rounded-r-md truncate\">\r\n                                                            <div className=\"flex-1 px-4 py-2 text-sm truncate\">\r\n                                                                <a href={shelf.href} className=\"text-gray-900 font-medium hover:text-gray-600\">\r\n                                                                    {shelf.name}\r\n                                                                </a>\r\n                                                                <p className=\"text-gray-500 space-x-2 flex items-center\">\r\n                                                                    <UserIcon className=\"h-4 inline\" aria-hidden=\"trur\" />\r\n                                                                    <span>{shelf.shelfDescription}</span>\r\n                                                                </p>\r\n                                                            </div>\r\n                                                            <div className=\"flex-shrink-0 pr-2\">\r\n                                                                <button\r\n                                                                    onClick={() => handleDeleteSharedWithMe(shelf.sharedShelfUid)}\r\n                                                                    className=\"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                                                >\r\n                                                                    <TrashIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                                </button>\r\n                                                                <button\r\n                                                                    onClick={() => {\r\n                                                                        setOpenState(true);\r\n                                                                        setShelfToShare({\r\n                                                                            shelfUid: shelf.shelfUid,\r\n                                                                            shelfName: shelf.name\r\n                                                                        })\r\n                                                                    }}\r\n                                                                    className=\"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                                                >\r\n                                                                    <ShareIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n\r\n                            {/* Right column */}\r\n                            <div className=\"grid grid-cols-1 gap-4\">\r\n                                <section aria-labelledby=\"section-2-title\">\r\n                                    <div className=\"rounded-lg bg-white overflow-y-auto shadow\" style={{ height: \"calc(100vh - 100px)\" }}>\r\n                                        {/* Recent Hires */}\r\n                                        <section aria-labelledby=\"recent-hires-title\">\r\n                                            <div className=\"rounded-lg bg-white overflow-y-auto\">\r\n                                                <div className=\"p-6\">\r\n                                                    <h2 className=\"text-base font-medium text-gray-900\" id=\"recent-hires-title\">\r\n                                                        Shared by me\r\n                                                    </h2>\r\n                                                    <div className=\"flow-root mt-6\">\r\n                                                        <ul className=\"-my-5 divide-y divide-gray-200\">\r\n                                                            {sharedByMeList.map((sharedShelf) => (\r\n                                                                <li key={sharedShelf.Shared_Shelf_UID} className=\"py-4\">\r\n                                                                    <div className=\"flex items-center space-x-4\">\r\n                                                                        <div className=\"flex-shrink-0 bg-gray-200 p-2 rounded-md\">\r\n                                                                            <FolderOpenIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                                        </div>\r\n                                                                        <div className=\"flex-1 min-w-0\">\r\n                                                                            <p className=\"text-sm font-medium text-gray-900 truncate\">{sharedShelf.Shelf_Name}</p>\r\n                                                                            <p className=\"text-sm text-gray-500 truncate space-x-2\">\r\n                                                                                <ShareIcon className=\"w-3 h-3 inline\" aria-hidden=\"true\" />\r\n                                                                                <span>{sharedShelf.Shared_With}</span>\r\n                                                                            </p>\r\n                                                                        </div>\r\n                                                                        <div>\r\n                                                                            <button\r\n                                                                                onClick={() => handleUnshare(sharedShelf.Shared_With_UID, sharedShelf.Shared_Shelf_UID)}\r\n                                                                                className=\"inline-flex items-center shadow-sm px-2.5 py-0.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50\"\r\n                                                                            >\r\n                                                                                Unshare\r\n                                                                            </button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </li>\r\n                                                            ))}\r\n                                                        </ul>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </section>\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                        {/* /End replace */}\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </main>\r\n            <UserList openState={openState} setOpenState={setOpenState} setSelectedUser={setSelectedUser} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SharedShelf;","import { useEffect, useState } from 'react';\r\nimport { Switch } from '@headlessui/react';\r\nimport { TrashIcon, FolderOpenIcon, ShareIcon } from '@heroicons/react/solid'\r\nimport axios from 'axios';\r\nimport jwt_decode from \"jwt-decode\";\r\n// import UserList from './UserList.Component';\r\nimport { reactLocalStorage } from 'reactjs-localstorage';\r\nimport UserList from '../components/UserList.component';\r\nimport { XCircleIcon } from '@heroicons/react/outline';\r\nimport SidebarToggleButton from '../components/SidebarToggleButton.component';\r\n\r\n\r\n\r\nfunction classNames(...classes) {\r\n    return classes.filter(Boolean).join(' ')\r\n}\r\n\r\nconst sortShelf = (arrayOfObjects) => {\r\n    var byDate = arrayOfObjects.slice(0);\r\n    byDate.sort(function (a, b) {\r\n        return b.dateCreated - a.dateCreated;\r\n    });\r\n    return byDate;\r\n}\r\n\r\nconst Shelfs = () => {\r\n    const accessToken = reactLocalStorage.get(\"accessToken\");\r\n\r\n    const [shelfList, setShelfList] = useState([])\r\n\r\n    const [shelfNameValue, setShelfNameValue] = useState(\"\");\r\n    const [shelfDescriptionValue, setShelfDescriptionValue] = useState(\"\");\r\n    const [enabled, setEnabled] = useState(true);\r\n    const [shelfToShare, setShelfToShare] = useState({});\r\n\r\n    // user list modal open state\r\n    const [openState, setOpenState] = useState(false);\r\n\r\n    // Create new shelf panel toggle state for mobile view\r\n    const [openCreateNew, setOpenCreateNew] = useState(false);\r\n\r\n    // Handle share shelf\r\n    const setSelectedUser = ({ selectedUserUid, selectedUserName }) => {\r\n        var currentUser = jwt_decode(accessToken);\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/share`, {\r\n            \"shelfUid\": shelfToShare.shelfUid,\r\n            \"sharedByUid\": currentUser.userUid,\r\n            \"sharedWithUid\": selectedUserUid,\r\n            \"shelfName\": shelfToShare.shelfName,\r\n            \"sharedBy\": currentUser.firstName + \" \" + currentUser.lastName,\r\n            \"sharedWith\": selectedUserName\r\n        }, {\r\n            headers: { \"token\": accessToken }\r\n        }).then(response => {\r\n            console.log(response.data);\r\n            alert(\"Shelf has been shared successfully with \" + selectedUserName);\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    const getUserShelf = () => {\r\n        setShelfList([]);\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/shelf`, {\r\n            headers: {\r\n                \"token\": accessToken\r\n            },\r\n        }).then((response) => {\r\n            const usersShelfs = response.data.userShelfs;\r\n            console.log(usersShelfs);\r\n            if (usersShelfs.length > 0) {\r\n                usersShelfs.forEach((shelf) => {\r\n                    setShelfList(oldArray => [\r\n                        ...oldArray,\r\n                        {\r\n                            name: shelf.Shelf_Name,\r\n                            initials: shelf.Is_Open == 1 ? \"GlobeIcon\" : \"LockClosedIcon\",\r\n                            href: `${process.env.REACT_APP_APP_URL}/mybooks?shelfUidTab=${shelf.Shelf_UID}`,\r\n                            shelfDescription: shelf.Shelf_Description,\r\n                            bgColor: shelf.Is_Open == 1 ? \"bg-green-500\" : \"bg-purple-600\",\r\n                            shelfUid: shelf.Shelf_UID,\r\n                            dateCreated: shelf.Shelf_Created_Date\r\n                        }\r\n                    ]);\r\n                })\r\n            }\r\n\r\n        }).catch(err => console.log(err))\r\n    }\r\n\r\n    const resetInputs = () => {\r\n        setShelfNameValue(\"\");\r\n        setShelfDescriptionValue(\"\");\r\n        setEnabled(true);\r\n    }\r\n\r\n    const handleCreateNewShelf = (e) => {\r\n        e.preventDefault();\r\n        axios.put(`${process.env.REACT_APP_SERVER_URL}/shelf`, {\r\n            \"shelfName\": shelfNameValue,\r\n            \"isOpen\": enabled ? 1 : 0,\r\n            \"shelfDescription\": shelfDescriptionValue\r\n        }, {\r\n            headers: { \"token\": accessToken }\r\n        }).then(response => {\r\n            console.log(response);\r\n            resetInputs();\r\n            alert(\"New shelf created\");\r\n            getUserShelf();\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    const handleDeleteShelf = (shelfUid) => {\r\n        let deleteConfirmation = window.confirm(\"By deleting this shelf all books of this shelf will be deleted. Delete anyway?\");\r\n        if (deleteConfirmation) {\r\n            axios.delete(`${process.env.REACT_APP_SERVER_URL}/shelf?shelfUid=${shelfUid}`, {\r\n                headers: { \"token\": accessToken }\r\n            }).then(response => {\r\n                getUserShelf();\r\n            }).catch(err => console.log(err));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUserShelf();\r\n        var currentUser = jwt_decode(accessToken);\r\n        console.log(currentUser)\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"bg-gray-800 pb-32 \">\r\n                <header className=\"py-6\">\r\n                    <div className=\"flex justify-between max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                        <div className=\"flex\">\r\n                            <SidebarToggleButton />\r\n                            <h1 className=\"text-2xl font-bold text-white\">\r\n\r\n                                Shelfs\r\n                            </h1>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setOpenCreateNew(!openCreateNew)}\r\n                            type=\"button\"\r\n                            className=\"inline-flex lg:hidden space-x-2 items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                        >\r\n                            {openCreateNew ? <XCircleIcon className=\"h-6\" /> : null}\r\n                            <span>{openCreateNew ? \"Close\" : \"Create new shelf\"}</span>\r\n                        </button>\r\n                    </div>\r\n\r\n\r\n                </header>\r\n            </div>\r\n\r\n            <main className=\"-mt-32\">\r\n                <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:max-w-7xl lg:px-8\">\r\n                    <div className=\"max-w-7xl mx-auto pb-12 px-4 sm:px-6 lg:px-8\">\r\n                        {/* Main 2 column grid */}\r\n                        <div className=\"grid grid-cols-1 gap-2 items-start lg:grid-cols-3 lg:gap-2\">\r\n                            {/* Left column */}\r\n                            <div className={\r\n                                openCreateNew ? \"hidden lg:block grid-cols-1 gap-4 lg:col-span-2\"\r\n                                    : \"grid grid-cols-1 gap-4 lg:col-span-2\"\r\n                            }>\r\n                                <section aria-labelledby=\"section-1-title\">\r\n                                    <div className=\"rounded-lg bg-white overflow-x-auto shadow\" style={{ height: \"calc(100vh - 100px)\" }}>\r\n                                        {/* Grid list */}\r\n                                        <div>\r\n                                            <ul className=\"m-6 mt-8 grid grid-cols-1 gap-5 sm:gap-6 sm:grid-cols-2 lg:grid-cols-2\">\r\n                                                {sortShelf(shelfList).map((shelf) => (\r\n                                                    <li key={shelf.shelfUid} className=\"col-span-1 flex shadow-sm rounded-md\">\r\n                                                        <div\r\n                                                            className={classNames(\r\n                                                                shelf.bgColor,\r\n                                                                'flex-shrink-0 flex items-center justify-center w-12 text-white text-sm font-medium rounded-l-md'\r\n                                                            )}\r\n                                                        >\r\n                                                            <FolderOpenIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                        </div>\r\n                                                        <div className=\"flex-1 flex items-center justify-between border-t border-r border-b border-gray-200 bg-white rounded-r-md truncate\">\r\n                                                            <div className=\"flex-1 px-4 py-2 text-sm truncate\">\r\n                                                                <a href={shelf.href} className=\"text-gray-900 font-medium hover:text-gray-600\">\r\n                                                                    {shelf.name}\r\n                                                                </a>\r\n                                                                <p className=\"text-gray-500\">{shelf.shelfDescription}</p>\r\n                                                            </div>\r\n                                                            <div className=\"flex-shrink-0 pr-2\">\r\n                                                                <button\r\n                                                                    onClick={() => handleDeleteShelf(shelf.shelfUid)}\r\n                                                                    className=\"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                                                >\r\n                                                                    <TrashIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                                </button>\r\n                                                                <button\r\n                                                                    onClick={() => {\r\n                                                                        setOpenState(true);\r\n                                                                        setShelfToShare({\r\n                                                                            shelfUid: shelf.shelfUid,\r\n                                                                            shelfName: shelf.name\r\n                                                                        })\r\n                                                                    }}\r\n                                                                    className=\"w-8 h-8 bg-white inline-flex items-center justify-center text-gray-400 rounded-full bg-transparent hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                                                >\r\n                                                                    <ShareIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n\r\n                            {/* Right column */}\r\n                            <div className=\"grid grid-cols-1 gap-4\">\r\n                                <section aria-labelledby=\"section-2-title\">\r\n                                    <div className=\"rounded-lg bg-white overflow-y-auto shadow\" style={{ height: \"calc(100vh - 100px)\" }}>\r\n\r\n                                        <form onSubmit={(e) => handleCreateNewShelf(e)} >\r\n                                            <div className=\"sm:rounded-md sm:overflow-y-auto\">\r\n                                                <div className=\"px-4 py-5 bg-white space-y-6 sm:p-6\">\r\n                                                    <h1 className=\"text-xl font-bold\">Create new shelf</h1>\r\n                                                    {/* Shelf name input */}\r\n                                                    <div>\r\n                                                        <div className=\"col-span-3 sm:col-span-2\">\r\n                                                            <label htmlFor=\"company-website\" className=\"block text-sm font-medium text-gray-700\">\r\n                                                                Shelf name\r\n                                                            </label>\r\n                                                            <div className=\"mt-1 flex rounded-md shadow-sm\">\r\n                                                                <input\r\n                                                                    onChange={(e) => setShelfNameValue(e.target.value)}\r\n                                                                    value={shelfNameValue}\r\n                                                                    type=\"text\"\r\n                                                                    className=\"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300\"\r\n                                                                    placeholder=\"Type shelf name\"\r\n                                                                />\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    {/* Shelf description input */}\r\n                                                    <div>\r\n                                                        <label htmlFor=\"about\" className=\"block text-sm font-medium text-gray-700\">\r\n                                                            Description\r\n                                                        </label>\r\n                                                        <div className=\"mt-1\">\r\n                                                            <textarea\r\n                                                                onChange={(e) => setShelfDescriptionValue(e.target.value)}\r\n                                                                value={shelfDescriptionValue}\r\n                                                                rows={3}\r\n                                                                className=\"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md\"\r\n                                                                placeholder=\"Type shelf description\"\r\n                                                                defaultValue={''}\r\n                                                            />\r\n                                                        </div>\r\n                                                        <p className=\"mt-2 text-sm text-gray-500\">\r\n                                                            Shortly describe what types of books you want save in this shelf\r\n                                                        </p>\r\n                                                    </div>\r\n\r\n                                                    {/* Public/Private switch */}\r\n                                                    <div>\r\n                                                        <Switch.Group as=\"div\" className=\"flex items-center justify-between\">\r\n                                                            <span className=\"flex-grow flex flex-col\">\r\n                                                                <Switch.Label as=\"span\" className=\"text-sm font-medium text-gray-900\" passive>\r\n                                                                    Open shelf\r\n                                                                </Switch.Label>\r\n                                                                <Switch.Description as=\"span\" className=\"text-sm text-gray-500\">\r\n                                                                    {\r\n                                                                        enabled\r\n                                                                            ? \"Any inknest user can browse open shelf.\"\r\n                                                                            : \"Only you can access this shelf.\"\r\n                                                                    }\r\n                                                                </Switch.Description>\r\n                                                            </span>\r\n                                                            <Switch\r\n                                                                checked={enabled}\r\n                                                                onChange={setEnabled}\r\n                                                                className={classNames(\r\n                                                                    enabled ? 'bg-indigo-600' : 'bg-gray-200',\r\n                                                                    'relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500'\r\n                                                                )}\r\n                                                            >\r\n                                                                <span\r\n                                                                    aria-hidden=\"true\"\r\n                                                                    className={classNames(\r\n                                                                        enabled ? 'translate-x-5' : 'translate-x-0',\r\n                                                                        'pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200'\r\n                                                                    )}\r\n                                                                />\r\n                                                            </Switch>\r\n                                                        </Switch.Group>\r\n                                                    </div>\r\n                                                    {/* Save button */}\r\n                                                    <div className=\"pt-5\">\r\n                                                        <div className=\"flex justify-end\">\r\n                                                            <button\r\n                                                                type=\"submit\"\r\n                                                                className=\"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                                            >\r\n                                                                Create shelf\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </form>\r\n\r\n\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                        {/* /End replace */}\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </main>\r\n\r\n            <UserList openState={openState} setOpenState={setOpenState} setSelectedUser={setSelectedUser} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Shelfs;","import axios from \"axios\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { reactLocalStorage } from \"reactjs-localstorage\";\r\n\r\nconst Signin = () => {\r\n    const history = useHistory();\r\n    \r\n    const handleSignin = (e) => {\r\n        e.preventDefault();\r\n        // get elements from form\r\n        const {email, password} = e.target.elements;\r\n\r\n        console.log(email, password);\r\n\r\n        // POST request for signup\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/login`,\r\n        {\r\n            email: email.value, \r\n            password: password.value\r\n        }).then(response => {\r\n            // Server returns accessToken if there is no existing same user\r\n            const {accessToken, msg} = response.data;\r\n            if(accessToken){\r\n                reactLocalStorage.set(\"accessToken\", accessToken);\r\n                history.push(\"/mybooks\");\r\n            }else{\r\n                alert(msg);\r\n            }\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white flex\">\r\n            <div className=\"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24\">\r\n                <div className=\"mx-auto w-full max-w-sm lg:w-96\">\r\n                    <div>\r\n                        <img\r\n                            className=\"h-12 w-auto\"\r\n                            src=\"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg\"\r\n                            alt=\"Workflow\"\r\n                        />\r\n                        <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Sign in to your account</h2>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n\r\n                        <div className=\"mt-6\">\r\n                            <form className=\"space-y-6\" action=\"#\" onSubmit={(e) => handleSignin(e)} >\r\n                                \r\n                                {/* Email input */}\r\n                                <div>\r\n                                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                                        Email address\r\n                                    </label>\r\n                                    <div className=\"mt-1\">\r\n                                        <input\r\n                                            id=\"email\"\r\n                                            name=\"email\"\r\n                                            type=\"email\"\r\n                                            autoComplete=\"email\"\r\n                                            required\r\n                                            className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                                        Password\r\n                                    </label>\r\n                                    <div className=\"mt-1\">\r\n                                        <input\r\n                                            id=\"password\"\r\n                                            name=\"password\"\r\n                                            type=\"password\"\r\n                                            autoComplete=\"new-password\"\r\n                                            required\r\n                                            className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <input\r\n                                            id=\"remember-me\"\r\n                                            name=\"remember-me\"\r\n                                            type=\"checkbox\"\r\n                                            className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n                                        />\r\n                                        <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                                            Remember me\r\n                                        </label>\r\n                                    </div>\r\n\r\n                                    <div className=\"text-sm\">\r\n                                        <a href=\"#\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n                                            Forgot your password?\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                    >\r\n                                        Sign in\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <Link to=\"/signup\"\r\n                                        className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                    >\r\n                                        Donn't have account? &nbsp; <span className=\"text-indigo-500\">Sign up</span>\r\n                                    </Link>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"hidden lg:block relative w-0 flex-1\">\r\n                <img\r\n                    className=\"absolute inset-0 h-full w-full object-cover\"\r\n                    src=\"https://images.unsplash.com/photo-1505904267569-f02eaeb45a4c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1908&q=80\"\r\n                    alt=\"\"\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signin;","import axios from \"axios\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { reactLocalStorage } from \"reactjs-localstorage\";\r\n\r\nconst Signup = () => {\r\n    const history = useHistory();\r\n\r\n    const handleSignup = (e) => {\r\n        e.preventDefault();\r\n        // get elements from form\r\n        const {firstName, lastName, email, password} = e.target.elements;\r\n\r\n        console.log(firstName, lastName, email, password);\r\n\r\n        // POST request for signup\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/signup`,\r\n        {\r\n            firstName: firstName.value, \r\n            lastName: lastName.value, \r\n            email: email.value, \r\n            password: password.value\r\n        }).then(response => {\r\n            // Server returns accessToken if there is no existing same user\r\n            const {accessToken, msg} = response.data;\r\n            if(accessToken){\r\n                reactLocalStorage.set(\"accessToken\", accessToken);\r\n                history.push(\"/mybooks\");\r\n            }else{\r\n                alert(msg);\r\n            }\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white flex\">\r\n            <div className=\"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24\">\r\n                <div className=\"mx-auto w-full max-w-sm lg:w-96\">\r\n                    <div>\r\n                        <img\r\n                            className=\"h-12 w-auto\"\r\n                            src=\"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg\"\r\n                            alt=\"Workflow\"\r\n                        />\r\n                        <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Sign up for new account</h2>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n\r\n                        <div className=\"mt-6\">\r\n                            <form className=\"space-y-6\" action=\"#\" onSubmit={(e) => handleSignup(e)} >\r\n                                {/* First name */}\r\n                                <div>\r\n                                    <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700\">\r\n                                        First name\r\n                                    </label>\r\n                                    <div className=\"mt-1\">\r\n                                        <input\r\n                                            id=\"firstName\"\r\n                                            name=\"firstName\"\r\n                                            type=\"text\"\r\n                                            autoComplete=\"given-name\"\r\n                                            required\r\n                                            className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                {/* Last name */}\r\n                                <div>\r\n                                    <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700\">\r\n                                        Last name\r\n                                    </label>\r\n                                    <div className=\"mt-1\">\r\n                                        <input\r\n                                            id=\"lastName\"\r\n                                            name=\"lastName\"\r\n                                            type=\"text\"\r\n                                            autoComplete=\"family-name\"\r\n                                            required\r\n                                            className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                {/* Email input */}\r\n                                <div>\r\n                                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                                        Email address\r\n                                    </label>\r\n                                    <div className=\"mt-1\">\r\n                                        <input\r\n                                            id=\"email\"\r\n                                            name=\"email\"\r\n                                            type=\"email\"\r\n                                            autoComplete=\"email\"\r\n                                            required\r\n                                            className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                                        Password\r\n                                    </label>\r\n                                    <div className=\"mt-1\">\r\n                                        <input\r\n                                            id=\"password\"\r\n                                            name=\"password\"\r\n                                            type=\"password\"\r\n                                            autoComplete=\"new-password\"\r\n                                            required\r\n                                            className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                    >\r\n                                        Sign up\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <Link to=\"/signin\"\r\n                                        className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                    >\r\n                                        Already have account? &nbsp; <span className=\"text-indigo-500\">Sign in</span>\r\n                                    </Link>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"hidden lg:block relative w-0 flex-1\">\r\n                <img\r\n                    className=\"absolute inset-0 h-full w-full object-cover\"\r\n                    src=\"https://images.unsplash.com/photo-1505904267569-f02eaeb45a4c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1908&q=80\"\r\n                    alt=\"\"\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signup;","// change later\r\nimport { Fragment, useEffect } from 'react'\r\nimport { Dialog, Menu, Transition } from '@headlessui/react'\r\nimport { BookOpenIcon, FolderDownloadIcon, FolderIcon, XIcon } from '@heroicons/react/outline'\r\nimport {\r\n    SearchIcon,\r\n    SelectorIcon,\r\n} from '@heroicons/react/solid'\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggle } from '../redux/menuSlice';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n\r\nconst navigation = [\r\n    { name: 'My books', href: '/mybooks', icon: BookOpenIcon },\r\n    { name: 'Shelfs', href: '/shelfs', icon: FolderIcon },\r\n    { name: 'Shared shelfs', href: '/sharedshelfs', icon: FolderDownloadIcon },\r\n    { name: 'Explore', href: '/explore', icon: SearchIcon },\r\n]\r\nconst teams = [\r\n    { name: 'Engineering', href: '#', bgColorClass: 'bg-indigo-500' },\r\n    { name: 'Human Resources', href: '#', bgColorClass: 'bg-green-500' },\r\n    { name: 'Customer Success', href: '#', bgColorClass: 'bg-yellow-500' },\r\n]\r\n\r\n\r\nfunction classNames(...classes) {\r\n    return classes.filter(Boolean).join(' ')\r\n}\r\n\r\nconst Sidebar = () => {\r\n    const menuState = useSelector((state)=>state.menuState.isOpen);\r\n    const dispatch = useDispatch();\r\n\r\n    const closeSideBar = () => {\r\n        dispatch(toggle());\r\n    }\r\n    const location = useLocation();\r\n    \r\n    // Hide the this component if the route location is signin or signup\r\n    if(location.pathname == \"/signin\" || location.pathname == \"/signup\"){\r\n        return(null)\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative h-screen flex overflow-hidden bg-white\">\r\n            {/* Sidebar for mobile view */}\r\n            <Transition.Root show={menuState} as={Fragment}>\r\n                <Dialog as=\"div\" static className=\"fixed inset-0 flex z-40 lg:hidden\" open={menuState} onClose={closeSideBar} >\r\n                    <Transition.Child as={Fragment} enter=\"transition-opacity ease-linear duration-300\" enterFrom=\"opacity-0\" enterTo=\"opacity-100\" leave=\"transition-opacity ease-linear duration-300\" leaveFrom=\"opacity-100\" leaveTo=\"opacity-0\" >\r\n                        <Dialog.Overlay className=\"fixed inset-0 bg-gray-600 bg-opacity-75\" />\r\n                    </Transition.Child>\r\n                    <Transition.Child as={Fragment} enter=\"transition ease-in-out duration-300 transform\" enterFrom=\"-translate-x-full\" enterTo=\"translate-x-0\" leave=\"transition ease-in-out duration-300 transform\" leaveFrom=\"translate-x-0\" leaveTo=\"-translate-x-full\" >\r\n                        <div className=\"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-white\">\r\n                            <Transition.Child as={Fragment} enter=\"ease-in-out duration-300\" enterFrom=\"opacity-0\" enterTo=\"opacity-100\" leave=\"ease-in-out duration-300\" leaveFrom=\"opacity-100\" leaveTo=\"opacity-0\" >\r\n                                <div className=\"absolute top-0 right-0 -mr-12 pt-2\">\r\n                                    <button className=\"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white\"\r\n                                        onClick={() => closeSideBar()}\r\n                                    >\r\n                                        <span className=\"sr-only\">Close sidebar</span>\r\n                                        <XIcon className=\"h-6 w-6 text-white\" aria-hidden=\"true\" />\r\n                                    </button>\r\n                                </div>\r\n                            </Transition.Child>\r\n                            <div className=\"flex-shrink-0 flex items-center px-4\">\r\n                                <img className=\"h-8 w-auto\"\r\n                                    src=\"https://tailwindui.com/img/logos/workflow-logo-purple-500-mark-gray-700-text.svg\" alt=\"Inknest\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"mt-5 flex-1 h-0 overflow-y-auto\">\r\n                                <nav className=\"px-2\">\r\n                                    <div className=\"space-y-1\">\r\n                                        {navigation.map((item) => (\r\n                                            <a\r\n                                                key={item.name}\r\n                                                href={item.href}\r\n                                                className={classNames(\r\n                                                    location.pathname == item.href\r\n                                                        ? 'bg-gray-100 text-gray-900'\r\n                                                        : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50',\r\n                                                    'group flex items-center px-2 py-2 text-base leading-5 font-medium rounded-md'\r\n                                                )}\r\n                                                aria-current={location.pathname == item.href ? 'page' : undefined}\r\n                                            >\r\n                                                <item.icon className={classNames(\r\n                                                    location.pathname == item.href ? 'text-gray-500' : 'text-gray-400 group-hover:text-gray-500',\r\n                                                    'mr-3 flex-shrink-0 h-6 w-6'\r\n                                                )}\r\n                                                    aria-hidden=\"true\"\r\n                                                />\r\n                                                {item.name}\r\n                                            </a>\r\n                                        ))}\r\n                                    </div>\r\n                                    <div className=\"mt-8\">\r\n                                        <h3 className=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider\" id=\"teams-headline\" >\r\n                                            Teams\r\n                                        </h3>\r\n                                        <div className=\"mt-1 space-y-1\" role=\"group\" aria-labelledby=\"teams-headline\">\r\n                                            {teams.map((team) => (\r\n                                                <a\r\n                                                    key={team.name}\r\n                                                    href={team.href}\r\n                                                    className=\"group flex items-center px-3 py-2 text-base leading-5 font-medium text-gray-600 rounded-md hover:text-gray-900 hover:bg-gray-50\"\r\n                                                >\r\n                                                    <span\r\n                                                        className={classNames(team.bgColorClass, 'w-2.5 h-2.5 mr-4 rounded-full')}\r\n                                                        aria-hidden=\"true\"\r\n                                                    />\r\n                                                    <span className=\"truncate\">{team.name}</span>\r\n                                                </a>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n                    </Transition.Child>\r\n                    <div className=\"flex-shrink-0 w-14\" aria-hidden=\"true\">\r\n                        {/* Dummy element to force sidebar to shrink to fit close icon */}\r\n                    </div>\r\n                </Dialog>\r\n            </Transition.Root>\r\n\r\n\r\n            {/* Static sidebar for desktop */}\r\n            <div className=\"hidden lg:flex lg:flex-shrink-0\">\r\n                <div className=\"flex flex-col w-64 border-r border-gray-200 pt-5 pb-4 bg-gray-100\">\r\n                    <div className=\"flex items-center flex-shrink-0 px-6\">\r\n                        <img\r\n                            className=\"h-8 w-auto\"\r\n                            src=\"https://tailwindui.com/img/logos/workflow-logo-purple-500-mark-gray-700-text.svg\"\r\n                            alt=\"Workflow\"\r\n                        />\r\n                    </div>\r\n                    {/* Sidebar component, swap this element with another sidebar if you like */}\r\n                    <div className=\"h-0 flex-1 flex flex-col overflow-y-auto\">\r\n                        {/* User account dropdown */}\r\n                        <Menu as=\"div\" className=\"px-3 mt-6 relative inline-block text-left\">\r\n                            {({ open }) => (\r\n                                <>\r\n                                    <div>\r\n                                        <Menu.Button className=\"group w-full bg-gray-100 rounded-md px-3.5 py-2 text-sm text-left font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-purple-500\">\r\n                                            <span className=\"flex w-full justify-between items-center\">\r\n                                                <span className=\"flex min-w-0 items-center justify-between space-x-3\">\r\n                                                    <img\r\n                                                        className=\"w-10 h-10 bg-gray-300 rounded-full flex-shrink-0\"\r\n                                                        src=\"https://images.unsplash.com/photo-1502685104226-ee32379fefbe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=3&w=256&h=256&q=80\"\r\n                                                        alt=\"\"\r\n                                                    />\r\n                                                    <span className=\"flex-1 flex flex-col min-w-0\">\r\n                                                        <span className=\"text-gray-900 text-sm font-medium truncate\">Jessy Schwarz</span>\r\n                                                        <span className=\"text-gray-500 text-sm truncate\">@jessyschwarz</span>\r\n                                                    </span>\r\n                                                </span>\r\n                                                <SelectorIcon\r\n                                                    className=\"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500\"\r\n                                                    aria-hidden=\"true\"\r\n                                                />\r\n                                            </span>\r\n                                        </Menu.Button>\r\n                                    </div>\r\n                                    <Transition\r\n                                        show={open}\r\n                                        as={Fragment}\r\n                                        enter=\"transition ease-out duration-100\"\r\n                                        enterFrom=\"transform opacity-0 scale-95\"\r\n                                        enterTo=\"transform opacity-100 scale-100\"\r\n                                        leave=\"transition ease-in duration-75\"\r\n                                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                                        leaveTo=\"transform opacity-0 scale-95\"\r\n                                    >\r\n                                        <Menu.Items\r\n                                            static\r\n                                            className=\"z-10 mx-3 origin-top absolute right-0 left-0 mt-1 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-200 focus:outline-none\"\r\n                                        >\r\n                                            <div className=\"py-1\">\r\n                                                <Menu.Item>\r\n                                                    {({ active }) => (\r\n                                                        <a\r\n                                                            href=\"#\"\r\n                                                            className={classNames(\r\n                                                                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                                'block px-4 py-2 text-sm'\r\n                                                            )}\r\n                                                        >\r\n                                                            View profile\r\n                                                        </a>\r\n                                                    )}\r\n                                                </Menu.Item>\r\n                                                <Menu.Item>\r\n                                                    {({ active }) => (\r\n                                                        <a\r\n                                                            href=\"#\"\r\n                                                            className={classNames(\r\n                                                                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                                'block px-4 py-2 text-sm'\r\n                                                            )}\r\n                                                        >\r\n                                                            Settings\r\n                                                        </a>\r\n                                                    )}\r\n                                                </Menu.Item>\r\n                                                <Menu.Item>\r\n                                                    {({ active }) => (\r\n                                                        <a\r\n                                                            href=\"#\"\r\n                                                            className={classNames(\r\n                                                                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                                'block px-4 py-2 text-sm'\r\n                                                            )}\r\n                                                        >\r\n                                                            Notifications\r\n                                                        </a>\r\n                                                    )}\r\n                                                </Menu.Item>\r\n                                            </div>\r\n                                            <div className=\"py-1\">\r\n                                                <Menu.Item>\r\n                                                    {({ active }) => (\r\n                                                        <a\r\n                                                            href=\"#\"\r\n                                                            className={classNames(\r\n                                                                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                                'block px-4 py-2 text-sm'\r\n                                                            )}\r\n                                                        >\r\n                                                            Get desktop app\r\n                                                        </a>\r\n                                                    )}\r\n                                                </Menu.Item>\r\n                                                <Menu.Item>\r\n                                                    {({ active }) => (\r\n                                                        <a\r\n                                                            href=\"#\"\r\n                                                            className={classNames(\r\n                                                                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                                'block px-4 py-2 text-sm'\r\n                                                            )}\r\n                                                        >\r\n                                                            Support\r\n                                                        </a>\r\n                                                    )}\r\n                                                </Menu.Item>\r\n                                            </div>\r\n                                            <div className=\"py-1\">\r\n                                                <Menu.Item>\r\n                                                    {({ active }) => (\r\n                                                        <a\r\n                                                            href=\"#\"\r\n                                                            className={classNames(\r\n                                                                active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                                'block px-4 py-2 text-sm'\r\n                                                            )}\r\n                                                        >\r\n                                                            Logout\r\n                                                        </a>\r\n                                                    )}\r\n                                                </Menu.Item>\r\n                                            </div>\r\n                                        </Menu.Items>\r\n                                    </Transition>\r\n                                </>\r\n                            )}\r\n                        </Menu>\r\n                        {/* Sidebar Search */}\r\n                        <div className=\"px-3 mt-5\">\r\n                            <label htmlFor=\"search\" className=\"sr-only\">\r\n                                Search\r\n                            </label>\r\n                            <div className=\"mt-1 relative rounded-md shadow-sm\">\r\n                                <div\r\n                                    className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\r\n                                    aria-hidden=\"true\"\r\n                                >\r\n                                    <SearchIcon className=\"mr-3 h-4 w-4 text-gray-400\" aria-hidden=\"true\" />\r\n                                </div>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"search\"\r\n                                    id=\"search\"\r\n                                    className=\"py-2 focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-9 sm:text-sm border-gray-300 rounded-md\"\r\n                                    placeholder=\"Search book\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        {/* Navigation */}\r\n                        <nav className=\"px-3 mt-6\">\r\n                            <div className=\"space-y-1\">\r\n                                {navigation.map((item) => (\r\n                                    <a\r\n                                        key={item.name}\r\n                                        href={item.href}\r\n                                        className={classNames(\r\n                                            location.pathname == item.href ? 'bg-gray-200 text-gray-900' : 'text-gray-700 hover:text-gray-900 hover:bg-gray-50',\r\n                                            'group flex items-center px-2 py-2 text-sm font-medium rounded-md'\r\n                                        )}\r\n                                        aria-current={location.pathname == item.href ? 'page' : undefined}\r\n                                    >\r\n                                        <item.icon\r\n                                            className={classNames(\r\n                                                location.pathname == item.href ? 'text-gray-500' : 'text-gray-400 group-hover:text-gray-500',\r\n                                                'mr-3 flex-shrink-0 h-6 w-6'\r\n                                            )}\r\n                                            aria-hidden=\"true\"\r\n                                        />\r\n                                        {item.name}\r\n                                    </a>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"mt-8\">\r\n                                {/* Secondary navigation */}\r\n                                <h3 className=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider\" id=\"teams-headline\">\r\n                                    Teams\r\n                                </h3>\r\n                                <div className=\"mt-1 space-y-1\" role=\"group\" aria-labelledby=\"teams-headline\">\r\n                                    {teams.map((team) => (\r\n                                        <a\r\n                                            key={team.name}\r\n                                            href={team.href}\r\n                                            className=\"group flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-md hover:text-gray-900 hover:bg-gray-50\"\r\n                                        >\r\n                                            <span\r\n                                                className={classNames(team.bgColorClass, 'w-2.5 h-2.5 mr-4 rounded-full')}\r\n                                                aria-hidden=\"true\"\r\n                                            />\r\n                                            <span className=\"truncate\">{team.name}</span>\r\n                                        </a>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar;","import { Fragment } from 'react'\r\nimport { Menu, Transition } from '@headlessui/react'\r\nimport { MenuAlt1Icon } from '@heroicons/react/outline'\r\nimport {\r\n  SearchIcon,\r\n} from '@heroicons/react/solid'\r\nimport { useDispatch } from 'react-redux'\r\nimport { toggle } from '../redux/menuSlice'\r\nimport { useLocation } from 'react-router'\r\n\r\n\r\nfunction classNames(...classes) {\r\n  return classes.filter(Boolean).join(' ')\r\n}\r\n\r\n\r\nconst SearchHeader = () => {\r\n    const location = useLocation();\r\n    const dispatch = useDispatch();\r\n    const setSidebarOpen = () =>{\r\n        dispatch(toggle());\r\n    }\r\n\r\n    // Hide the this component if the route location is signin or signup\r\n    if(location.pathname == \"/signin\" || location.pathname == \"/signup\"){\r\n        return(null)\r\n    }\r\n    return (\r\n        <div className=\"relative z-10 flex-shrink-0 flex h-16 bg-white border-b border-gray-200 lg:hidden\">\r\n            <button\r\n                className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple-500 lg:hidden\"\r\n                onClick={() => setSidebarOpen(true)}\r\n            >\r\n                <span className=\"sr-only\">Open sidebar</span>\r\n                <MenuAlt1Icon className=\"h-6 w-6\" aria-hidden=\"true\" />\r\n            </button>\r\n            <div className=\"flex-1 flex justify-between px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex-1 flex\">\r\n                    <form className=\"w-full flex md:ml-0\" action=\"#\" method=\"GET\">\r\n                        <label htmlFor=\"search-field\" className=\"sr-only\">\r\n                            Search\r\n                        </label>\r\n                        <div className=\"relative w-full text-gray-400 focus-within:text-gray-600\">\r\n                            <div className=\"absolute inset-y-0 left-0 flex items-center pointer-events-none\">\r\n                                <SearchIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n                            </div>\r\n                            <input\r\n                                id=\"search-field\"\r\n                                name=\"search-field\"\r\n                                className=\"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 focus:border-transparent focus:placeholder-gray-400 sm:text-sm\"\r\n                                placeholder=\"Search\"\r\n                                type=\"search\"\r\n                            />\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className=\"flex items-center\">\r\n                    {/* Profile dropdown */}\r\n                    <Menu as=\"div\" className=\"ml-3 relative\">\r\n                        {({ open }) => (\r\n                            <>\r\n                                <div>\r\n                                    <Menu.Button className=\"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500\">\r\n                                        <span className=\"sr-only\">Open user menu</span>\r\n                                        <img\r\n                                            className=\"h-8 w-8 rounded-full\"\r\n                                            src=\"https://images.unsplash.com/photo-1502685104226-ee32379fefbe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80\"\r\n                                            alt=\"\"\r\n                                        />\r\n                                    </Menu.Button>\r\n                                </div>\r\n                                <Transition\r\n                                    show={open}\r\n                                    as={Fragment}\r\n                                    enter=\"transition ease-out duration-100\"\r\n                                    enterFrom=\"transform opacity-0 scale-95\"\r\n                                    enterTo=\"transform opacity-100 scale-100\"\r\n                                    leave=\"transition ease-in duration-75\"\r\n                                    leaveFrom=\"transform opacity-100 scale-100\"\r\n                                    leaveTo=\"transform opacity-0 scale-95\"\r\n                                >\r\n                                    <Menu.Items\r\n                                        static\r\n                                        className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-200 focus:outline-none\"\r\n                                    >\r\n                                        <div className=\"py-1\">\r\n                                            <Menu.Item>\r\n                                                {({ active }) => (\r\n                                                    <a\r\n                                                        href=\"#\"\r\n                                                        className={classNames(\r\n                                                            active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                            'block px-4 py-2 text-sm'\r\n                                                        )}\r\n                                                    >\r\n                                                        View profile\r\n                                                    </a>\r\n                                                )}\r\n                                            </Menu.Item>\r\n                                            <Menu.Item>\r\n                                                {({ active }) => (\r\n                                                    <a\r\n                                                        href=\"#\"\r\n                                                        className={classNames(\r\n                                                            active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                            'block px-4 py-2 text-sm'\r\n                                                        )}\r\n                                                    >\r\n                                                        Settings\r\n                                                    </a>\r\n                                                )}\r\n                                            </Menu.Item>\r\n                                            <Menu.Item>\r\n                                                {({ active }) => (\r\n                                                    <a\r\n                                                        href=\"#\"\r\n                                                        className={classNames(\r\n                                                            active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                            'block px-4 py-2 text-sm'\r\n                                                        )}\r\n                                                    >\r\n                                                        Notifications\r\n                                                    </a>\r\n                                                )}\r\n                                            </Menu.Item>\r\n                                        </div>\r\n                                        <div className=\"py-1\">\r\n                                            <Menu.Item>\r\n                                                {({ active }) => (\r\n                                                    <a\r\n                                                        href=\"#\"\r\n                                                        className={classNames(\r\n                                                            active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                            'block px-4 py-2 text-sm'\r\n                                                        )}\r\n                                                    >\r\n                                                        Get desktop app\r\n                                                    </a>\r\n                                                )}\r\n                                            </Menu.Item>\r\n                                            <Menu.Item>\r\n                                                {({ active }) => (\r\n                                                    <a\r\n                                                        href=\"#\"\r\n                                                        className={classNames(\r\n                                                            active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                            'block px-4 py-2 text-sm'\r\n                                                        )}\r\n                                                    >\r\n                                                        Support\r\n                                                    </a>\r\n                                                )}\r\n                                            </Menu.Item>\r\n                                        </div>\r\n                                        <div className=\"py-1\">\r\n                                            <Menu.Item>\r\n                                                {({ active }) => (\r\n                                                    <a\r\n                                                        href=\"#\"\r\n                                                        className={classNames(\r\n                                                            active ? 'bg-gray-100 text-gray-900' : 'text-gray-700',\r\n                                                            'block px-4 py-2 text-sm'\r\n                                                        )}\r\n                                                    >\r\n                                                        Logout\r\n                                                    </a>\r\n                                                )}\r\n                                            </Menu.Item>\r\n                                        </div>\r\n                                    </Menu.Items>\r\n                                </Transition>\r\n                            </>\r\n                        )}\r\n                    </Menu>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchHeader;","/* This example requires Tailwind CSS v2.0+ */\r\nimport { Fragment, useContext, useEffect, useState } from 'react'\r\nimport { Menu, Transition } from '@headlessui/react'\r\nimport { ChevronDownIcon } from '@heroicons/react/solid'\r\nimport axios from 'axios'\r\nimport localforage from 'localforage'\r\nimport CurrentFileContext from '../tools/currentFileContext'\r\nimport { reactLocalStorage } from 'reactjs-localstorage'\r\n\r\nfunction classNames(...classes) {\r\n  return classes.filter(Boolean).join(' ')\r\n}\r\n\r\nconst ShelfListDropdown = () => {\r\n  const { currentFile, setCurrentFile } = useContext(CurrentFileContext);\r\n\r\n  const accessToken = reactLocalStorage.get(\"accessToken\");\r\n\r\n  const [uploadingState, setUploadingState] = useState(\"notStarted\"); // notStarted, started, finished\r\n\r\n  // get shelf list\r\n  const [userShelfs, setUserShelfs] = useState([]);\r\n  const getUserShelf = () => {\r\n    axios.get(`${process.env.REACT_APP_SERVER_URL}/shelf`, {\r\n      headers: {\r\n        \"token\": accessToken\r\n      },\r\n    }).then((response) => {\r\n      console.log(response.data.userShelfs)\r\n      setUserShelfs(response.data.userShelfs);\r\n    }).catch(err => console.log(err))\r\n  }\r\n\r\n\r\n  // handle file upload\r\n  const uploadBook = async (selectedShelfUid, selectedShelfName) => {\r\n    setUploadingState(\"started\");\r\n\r\n    // axios post data must a be a valid html FormData\r\n    // So creating html FormData object and appending data as html input with name attribute\r\n    var formData = new FormData();\r\n    formData.append('inknestFiles', currentFile.file);\r\n    formData.append('shelfUid', selectedShelfUid);\r\n\r\n    var pdfThumbnail = await localforage.getItem(\"pdfThumbnail\");\r\n    formData.append('pdfThumbnail', pdfThumbnail);\r\n\r\n    axios.post(`${process.env.REACT_APP_SERVER_URL}/file`, formData, {\r\n      headers: {\r\n        'content-type': 'multipart/form-data; boundary=<calculated when request is sent>\"',\r\n        \"token\": accessToken\r\n      },\r\n      onUploadProgress: (progress) => console.log(progress)\r\n    }).then(response => {\r\n      setUploadingState(\"finished\");\r\n    }).catch(err => {\r\n      console.log(err);\r\n      setUploadingState(\"notStarted\");\r\n      alert(\"Upload faild\")\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    getUserShelf();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setUploadingState(\"notStarted\");\r\n  }, [currentFile])\r\n\r\n\r\n  return (\r\n    <Menu as=\"div\" className=\"relative inline-block text-left\">\r\n      {({ open }) => (\r\n        <>\r\n          <div>\r\n            {\r\n              uploadingState == \"notStarted\"\r\n                ? <Menu.Button className=\"overflow-hidden relative space-x-2 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md  text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\r\n                  <span className=\"hidden lg:block\">Save to shelf</span>\r\n                  <span className=\"lg:hidden block\">Select shelf to save</span>\r\n                  <ChevronDownIcon className=\"-mr-1 ml-2 h-5 w-5\" aria-hidden=\"true\" />\r\n                </Menu.Button>\r\n                : uploadingState == \"started\"\r\n                  ? <p>Uploading...</p>\r\n                  : <p>Upload finished</p>\r\n            }\r\n          </div>\r\n\r\n          <Transition\r\n            show={open}\r\n            as={Fragment}\r\n            enter=\"transition ease-out duration-100\"\r\n            enterFrom=\"transform opacity-0 scale-95\"\r\n            enterTo=\"transform opacity-100 scale-100\"\r\n            leave=\"transition ease-in duration-75\"\r\n            leaveFrom=\"transform opacity-100 scale-100\"\r\n            leaveTo=\"transform opacity-0 scale-95\"\r\n          >\r\n            <Menu.Items\r\n              static\r\n              className=\"cursor-pointer origin-top-left absolute left-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\r\n            >\r\n              {userShelfs.map(shelf => (\r\n                <div className=\"py-1\">\r\n                  <Menu.Item>\r\n                    {({ active }) => (\r\n                      <span\r\n                        onClick={() => { uploadBook(shelf.Shelf_UID, shelf.Shelf_Name) }}\r\n                        className={classNames(\r\n                          active ? 'bg-indigo-600 text-white' : 'text-gray-700',\r\n                          'block px-4 py-2 text-sm'\r\n                        )}\r\n                      >\r\n                        {shelf.Shelf_Name}\r\n                      </span>\r\n                    )}\r\n                  </Menu.Item>\r\n                </div>\r\n              ))}\r\n            </Menu.Items>\r\n          </Transition>\r\n        </>\r\n      )}\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default ShelfListDropdown;","import axios from 'axios';\r\nimport { useContext, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { reactLocalStorage } from 'reactjs-localstorage';\r\nimport CurrentFileContext from '../tools/currentFileContext';\r\nimport ShelfListDropdown from './ShelfListDropdown.component';\r\nimport {MenuIcon, DotsCircleHorizontalIcon} from \"@heroicons/react/outline\"\r\nimport { useStore } from 'react-redux';\r\nimport { XCircleIcon } from '@heroicons/react/solid';\r\n\r\n\r\n\r\nconst DetailsSidebar = () => {\r\n    const accessToken = reactLocalStorage.get(\"accessToken\");\r\n    const { currentFile, setCurrentFile } = useContext(CurrentFileContext);\r\n    const [openDetails, setOpenDetails] = useState(false);\r\n\r\n    const history = useHistory();\r\n\r\n    const handleDeleteBook = (fileUid) => {\r\n        let confirmDelete = window.confirm(\"Are you sure you want to delete this book?\");\r\n        if (confirmDelete) {\r\n            axios.delete(`${process.env.REACT_APP_SERVER_URL}/file?fileUid=${fileUid}`, {\r\n                headers: { \"token\": accessToken }\r\n            }).then((response) => {\r\n                console.log(response.data)\r\n                history.push(\"/dashboard\");\r\n            }).catch(err => console.log(err));\r\n        }\r\n    }\r\n\r\n    if (!currentFile.fileInfo) {\r\n        return (\r\n            <aside className=\"hidden w-96 bg-white p-8 border-l border-gray-200 overflow-y-auto lg:block\"></aside>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <aside className=\"w-full lg:w-96 bg-white p-8 border-l border-gray-200 overflow-y-auto lg:block absolute bottom-0 lg:relative\">\r\n            {/* Bottom details toggle panel */}\r\n            <div className=\"flex justify-center items-center\">\r\n                <button\r\n                    onClick={()=>setOpenDetails(!openDetails)}\r\n                    type=\"button\"\r\n                    className=\"space-x-2 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                >\r\n                    {openDetails?<XCircleIcon className=\"h-6\"/>:<MenuIcon className=\"h-6\" />}\r\n                    <span>{openDetails?\"Close\":currentFile.fileInfo.fileUid?\"View details\":\"Save to shelf\"}</span>\r\n                </button>\r\n            </div>\r\n\r\n            {\r\n                openDetails\r\n                ?<div className=\"pb-16 space-y-6\">\r\n                <div className=\"mt-4 flex items-start justify-between\">\r\n                    <div className=\"space-y-6\">\r\n                        <h2 className=\"text-md lg:text-xl font-medium text-gray-900\">\r\n                            <span className=\"sr-only\">Details for </span>\r\n                            {currentFile.fileInfo ? currentFile.fileInfo.name : null}\r\n                        </h2>\r\n                        {/* only uploaded file has fileUid */}\r\n                        {\r\n                            currentFile.fileInfo.fileUid\r\n                                ? null\r\n                                : <ShelfListDropdown />\r\n                        }\r\n\r\n\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <h3 className=\"font-medium text-gray-900\">File Information</h3>\r\n                    <dl className=\"mt-2 border-t border-b border-gray-200 divide-y divide-gray-200\">\r\n                        {currentFile.fileInfo ? Object.keys(currentFile.fileInfo).map((key) => (\r\n                            key !== \"name\"\r\n                                ? <div key={key} className=\"py-3 flex justify-between text-sm font-medium\">\r\n                                    <dt className=\"text-gray-500\">{key}</dt>\r\n                                    <dd className=\"text-gray-900\">{currentFile.fileInfo[key]}</dd>\r\n                                </div> : null\r\n                        )) : null}\r\n                    </dl>\r\n\r\n                    {\r\n                        currentFile.fileInfo.fileUid\r\n                            ? <div className=\"flex justify-end mt-12\">\r\n                                <button\r\n                                    onClick={() => handleDeleteBook(currentFile.fileInfo.fileUid)}\r\n                                    type=\"button\"\r\n                                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-gray-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                >\r\n                                    Delete book\r\n                                </button>\r\n                            </div> : null\r\n                    }\r\n                </div>\r\n            </div>\r\n            :null\r\n            }\r\n        </aside>\r\n    )\r\n}\r\n\r\nexport default DetailsSidebar","import ePub from \"epubjs\";\r\nimport { useEffect } from \"react\";\r\nimport { ChevronLeftIcon, ChevronRightIcon } from '@heroicons/react/solid'\r\nimport \"./epubStyle.css\";\r\n\r\nconst EpubViewer = ({ file }) => {\r\n    function removeElementsByClass(className) {\r\n        const elements = document.getElementsByClassName(className);\r\n        while (elements.length > 0) {\r\n            elements[0].parentNode.removeChild(elements[0]);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        removeElementsByClass(\"epub-container\");\r\n    }, [file])\r\n\r\n    var ePubInstance = ePub(file);\r\n    var rendition = ePubInstance.renderTo(\"viewer\", {\r\n        manager: \"continuous\",\r\n        flow: \"paginated\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        snap: true\r\n    });\r\n\r\n    ePubInstance.loaded.navigation.then(function (toc) {\r\n        var $select = document.getElementById(\"toc\"),\r\n            docfrag = document.createDocumentFragment();\r\n\r\n        toc.forEach(function (chapter) {\r\n            var option = document.createElement(\"option\");\r\n            option.textContent = chapter.label;\r\n            option.ref = chapter.href;\r\n\r\n            docfrag.appendChild(option);\r\n        });\r\n\r\n        $select.appendChild(docfrag);\r\n\r\n        $select.onchange = function () {\r\n            var index = $select.selectedIndex,\r\n                url = $select.options[index].ref;\r\n            rendition.display(url);\r\n            return false;\r\n        };\r\n    });\r\n\r\n    var displayed = rendition.display();\r\n\r\n\r\n    const next = () => {\r\n        console.log(rendition)\r\n        rendition.next();\r\n    }\r\n\r\n    const prev = () => {\r\n        rendition.prev()\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"overflow-x-auto\">\r\n            <div className=\"flex justify-center items-center\">\r\n                <span className=\"z-50 relative inline-flex shadow-sm rounded-md\">\r\n                    <button\r\n                    onClick={() => prev()}\r\n                        type=\"button\"\r\n                        className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                    >\r\n                        <ChevronLeftIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n                    </button>\r\n                    <div>\r\n                        <select\r\n                            id=\"toc\"\r\n                            name=\"location\"\r\n                            className=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n                            defaultValue=\"Canada\"\r\n                        >\r\n                        </select>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => next()}\r\n                        type=\"button\"\r\n                        className=\"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                    >\r\n                        <ChevronRightIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n                    </button>\r\n                </span>\r\n            </div>\r\n            <div id=\"viewer\" className=\"epub-renderer\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default EpubViewer;","function ab2str(buf) {\n\tif (buf instanceof ArrayBuffer) {\n\t\tbuf = new Uint8Array(buf);\n\t}\n\treturn new TextDecoder(\"utf-8\").decode(buf);\n}\n\nvar domParser = new DOMParser();\n\nclass Buffer {\n\tconstructor(capacity) {\n\t\tthis.capacity = capacity;\n\t\tthis.fragment_list = [];\n\t\tthis.cur_fragment = new Fragment(capacity);\n\t\tthis.fragment_list.push(this.cur_fragment);\n\t}\n\twrite(byte) {\n\t\tvar result = this.cur_fragment.write(byte);\n\t\tif (!result) {\n\t\t\tthis.cur_fragment = new Fragment(this.capacity);\n\t\t\tthis.fragment_list.push(this.cur_fragment);\n\t\t\tthis.cur_fragment.write(byte);\n\t\t}\n\t}\n\tget(idx) {\n\t\tvar fi = 0;\n\t\twhile (fi < this.fragment_list.length) {\n\t\t\tvar frag = this.fragment_list[fi];\n\t\t\tif (idx < frag.size) {\n\t\t\t\treturn frag.get(idx);\n\t\t\t}\n\t\t\tidx -= frag.size;\n\t\t\tfi += 1;\n\t\t}\n\t\treturn null;\n\t}\n\tsize() {\n\t\tvar s = 0;\n\t\tfor (var i = 0; i < this.fragment_list.length; i++) {\n\t\t\ts += this.fragment_list[i].size;\n\t\t}\n\t\treturn s;\n\t}\n\tshrink() {\n\t\tvar total_buffer = new Uint8Array(this.size());\n\t\tvar offset = 0;\n\t\tfor (var i = 0; i < this.fragment_list.length; i++) {\n\t\t\tvar frag = this.fragment_list[i];\n\t\t\tif (frag.full()) {\n\t\t\t\ttotal_buffer.set(frag.buffer, offset);\n\t\t\t} else {\n\t\t\t\ttotal_buffer.set(frag.buffer.slice(0, frag.size), offset);\n\t\t\t}\n\t\t\toffset += frag.size;\n\t\t}\n\t\treturn total_buffer;\n\t}\n}\n\nvar combine_uint8array = function(buffers) {\n\tvar total_size = 0;\n\tfor(var i = 0 ;i < buffers.length; i++) {\n\t\tvar buffer = buffers[i];\n\t\ttotal_size \t+= buffer.length;\n\t}\n\tvar total_buffer = new Uint8Array(total_size);\n\tvar offset = 0;\n\tfor(var i = 0 ;i < buffers.length; i++) {\n\t\tvar buffer = buffers[i];\n\t\ttotal_buffer.set(buffer, offset);\n\t\toffset += buffer.length;\n\t}\n\treturn total_buffer;\n}\n\nclass Fragment {\n\tconstructor(capacity) {\n\t\tthis.buffer = new Uint8Array(capacity);\n\t\tthis.capacity = capacity;\n\t\tthis.size = 0;\n\t}\n\n\twrite(byte) {\n\t\tif (this.size >= this.capacity) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.buffer[this.size] = byte;\n\t\tthis.size += 1;\n\t\treturn true;\n\t}\n\tfull() {\n\t\treturn this.size === this.capacity;\n\t}\n\tget(idx) {\n\t\treturn this.buffer[idx];\n\t}\n}\n\nvar uncompression_lz77 = function(data) {\n\tvar length = data.length;\n\tvar offset = 0;   // Current offset into data\n\tvar buffer = new Buffer(data.length);\n\n\twhile(offset < length) {\n\t\tvar char = data[offset];\n\t    offset += 1;\n\n\t    if (char == 0) {\n\t    \tbuffer.write(char);\n\t    } else if (char <= 8){\n\t      \tfor(var i = offset; i < offset + char; i++) {\n\t      \t\tbuffer.write(data[i]);\n\t      \t}\n\t      \toffset += char;\n\t    } else if (char <= 0x7f) {\n\t    \tbuffer.write(char);\n\t\t} else if (char <= 0xbf) {\n\t\t\tvar next = data[offset];\n\t\t\toffset += 1;\n\t\t\tvar distance = ((char << 8 | next) >> 3) & 0x7ff;\n\t\t\tvar lz_length = (next & 0x7) + 3;\n\n\t\t\tvar buffer_size = buffer.size();\n\t\t\tfor (var i = 0; i < lz_length; i++) {\n\t\t\t\tbuffer.write(buffer.get(buffer_size - distance))\n\t\t\t\tbuffer_size += 1;\n\t\t\t}\n\t\t} else {\n\t\t\tbuffer.write(32);\n\t\t\tbuffer.write(char ^ 0x80);\n\t\t}\n\t}\n\treturn buffer;\n};\n\nexport class MobiFile {\n\tconstructor(data) {\n\t\tthis.view = new DataView(data);\n\t\tthis.buffer = this.view.buffer;\n\t\tthis.offset = 0;\n\t\tthis.header = null;\n\t}\n\n\tparse() {\n\n\t}\n\n\tgetUint8() {\n\t\tvar v = this.view.getUint8(this.offset);\n\t\tthis.offset += 1;\n\t\treturn v;\n\t}\n\n\tgetUint16() {\n\t\tvar v = this.view.getUint16(this.offset);\n\t\tthis.offset += 2;\n\t\treturn v;\n\t}\n\n\tgetUint32() {\n\t\tvar v = this.view.getUint32(this.offset);\n\t\tthis.offset += 4;\n\t\treturn v;\n\t}\n\n\tgetStr(size) {\n\t\tvar v = ab2str(this.buffer.slice(this.offset, this.offset + size));\n\t\tthis.offset += size;\n\t\treturn v;\n\t}\n\n\tskip(size) {\n\t\tthis.offset += size;\n\t}\n\n\tsetoffset(_of) {\n\t\tthis.offset = _of;\n\t}\n\n\tget_record_extrasize(data, flags) {\n\t\tvar pos = data.length - 1;\n\t\tvar extra = 0;\n\t\tfor (var i = 15; i > 0; i--) {\n\t\t\tif (flags & (1 << i)) {\n\t\t\t\tvar res = this.buffer_get_varlen(data, pos);\n\t\t\t\tvar size = res[0];\n\t\t\t\tvar l = res[1];\n\t\t\t\tpos = res[2];\n\t\t\t\tpos -= size - l;\n\t\t\t\textra += size;\n\t\t\t}\n\t\t}\n\t\tif (flags & 1) {\n\t\t\tvar a = data[pos];\n\t\t\textra += (a & 0x3) + 1;\n\t\t}\n\t\treturn extra;\n\t}\n\n\t// data should be uint8array\n\tbuffer_get_varlen(data, pos) {\n\t\tvar l = 0;\n        var size = 0;\n        var byte_count = 0;\n        var mask = 0x7f;\n        var stop_flag = 0x80;\n        var shift = 0;\n        for (var i = 0; ; i++ ) {\n            var byte = data[pos];\n            size |= (byte & mask) << shift;\n            shift += 7;\n            l += 1;\n            byte_count += 1;\n            pos -= 1;\n\n\t\t\tvar to_stop = byte & stop_flag;\n            if (byte_count >= 4 || to_stop > 0) {\n                break;\n            }\n        }\n        return [size, l, pos];\n\t}\n\n\tread_text() {\n\t\tvar text_end = this.palm_header.record_count;\n\t\tvar buffers = [];\n\t\tfor (var i = 1; i <= text_end; i++) {\n\t\t\tbuffers.push(this.read_text_record(i));\t\n\t\t}\n\t\tvar all = combine_uint8array(buffers)\n\t\treturn ab2str(all);\n\t}\n\n\tread_text_record(i) {\n\t\tvar flags = this.mobi_header.extra_flags;\n\t\tvar begin = this.reclist[i].offset;\n\t\tvar end = this.reclist[i+1].offset;\n\n\t\tvar data = new Uint8Array(this.buffer.slice(begin, end))\n\t\tvar ex = this.get_record_extrasize(data, flags);\n\n\t\tdata = new Uint8Array(this.buffer.slice(begin, end - ex));\n\t\tif (this.palm_header.compression === 2) {\n\t\t\tvar buffer = uncompression_lz77(data);\n\t\t\treturn buffer.shrink();\n\t\t} else {\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tread_image(idx) {\n\t\tvar first_image_idx = this.mobi_header.first_image_idx;\n\t\tvar begin = this.reclist[first_image_idx + idx].offset;\n\t\tvar end = this.reclist[first_image_idx + idx + 1].offset;\n\t\tvar data = new Uint8Array(this.buffer.slice(begin, end))\n\t\treturn new Blob([data.buffer]);\n\t}\n\n\tload() {\n\t\tthis.header = this.load_pdbheader();\n\t\tthis.reclist = this.load_reclist();\n\t\tthis.load_record0();\n\t}\n\n\tload_pdbheader() {\n\t\tvar header = {};\n\t\theader.name = this.getStr(32);\n\t\theader.attr = this.getUint16();\n\t\theader.version = this.getUint16();\n\t\theader.ctime = this.getUint32();\n\t\theader.mtime = this.getUint32();\n\t\theader.btime = this.getUint32();\n\t\theader.mod_num = this.getUint32();\n\t\theader.appinfo_offset = this.getUint32();\n\t\theader.sortinfo_offset = this.getUint32();\n\t\theader.type = this.getStr(4);\n\t\theader.creator = this.getStr(4);\n\t\theader.uid = this.getUint32();\n\t\theader.next_rec = this.getUint32();\n\t\theader.record_num = this.getUint16();\n\n\t\treturn header;\n\t}\n\n\tload_reclist() {\n\t\tvar reclist = [];\n\t\tfor(var i = 0; i < this.header.record_num; i++) {\n\t\t\tvar record = {};\n\t\t\trecord.offset = this.getUint32();\n\t\t\t// TODO(zz) change \n\t\t\trecord.attr = this.getUint32();\n\t\t\treclist.push(record);\n\t\t}\n\t\treturn reclist;\n\t}\n\tload_record0() {\n\t\tthis.palm_header = this.load_record0_header();\n\t\tthis.mobi_header = this.load_mobi_header();\n\t}\n\n\tload_record0_header() {\n\t\tvar p_header = {};\n\t\tvar first_record = this.reclist[0];\n\t\tthis.setoffset(first_record.offset);\n\n\t\tp_header.compression = this.getUint16();\n\t\tthis.skip(2);\n\t\tp_header.text_length = this.getUint32();\n\t\tp_header.record_count = this.getUint16();\n\t\tp_header.record_size = this.getUint16();\n\t\tp_header.encryption_type = this.getUint16();\n\t\tthis.skip(2);\n\n\t\treturn p_header;\n\t}\n\n\tload_mobi_header() {\n\t\tvar mobi_header = {};\n\n\t\tvar start_offset = this.offset;\n\n\t\tmobi_header.identifier = this.getUint32();\n\t\tmobi_header.header_length = this.getUint32();\n\t\tmobi_header.mobi_type = this.getUint32();\n\t\tmobi_header.text_encoding = this.getUint32();\n\t\tmobi_header.uid = this.getUint32();\n\t\tmobi_header.generator_version = this.getUint32();\n\n\t\tthis.skip(40);\n\n\t\tmobi_header.first_nonbook_index = this.getUint32();\n\t\tmobi_header.full_name_offset = this.getUint32();\n\t\tmobi_header.full_name_length = this.getUint32();\n\n\t\tmobi_header.language = this.getUint32();\n\t\tmobi_header.input_language = this.getUint32();\n\t\tmobi_header.output_language = this.getUint32();\n\t\tmobi_header.min_version = this.getUint32();\n\t\tmobi_header.first_image_idx = this.getUint32();\n\n\t\tmobi_header.huff_rec_index = this.getUint32();\n\t\tmobi_header.huff_rec_count = this.getUint32();\n\t\tmobi_header.datp_rec_index = this.getUint32();\n\t\tmobi_header.datp_rec_count = this.getUint32();\n\n\t\tmobi_header.exth_flags = this.getUint32();\n\n\t\tthis.skip(36);\n\n\t\tmobi_header.drm_offset = this.getUint32();\n\t\tmobi_header.drm_count = this.getUint32();\n\t\tmobi_header.drm_size = this.getUint32();\n\t\tmobi_header.drm_flags = this.getUint32();\n\n\t\tthis.skip(8);\n\n\t\t// TODO (zz) fdst_index\n\t\tthis.skip(4);\n\n\t\tthis.skip(46);\n\n\t\tmobi_header.extra_flags = this.getUint16();\n\n\t\tthis.setoffset(start_offset + mobi_header.header_length)\n\n\t\treturn mobi_header;\n\t}\n\tload_exth_header() {\n\t\t// TODO\n\t\treturn {};\n\t}\n\n\trender_to(id) {\n\t\tthis.load();\n\t\tvar content = this.read_text();\n\n\t\tvar bookDom = document.getElementById(id);\n        while (bookDom.firstChild) {\n            bookDom.removeChild(bookDom.firstChild);\n        }\n\n        var bookDoc = domParser.parseFromString(content, \"text/html\");\n        bookDoc.body.childNodes.forEach(function(x) {\n            if (x instanceof Element) {\n\t            bookDom.appendChild(x);\n\t        }\n        });\n\n        var imgDoms = bookDom.getElementsByTagName(\"img\");\n        for (var i = 0 ;i < imgDoms.length; i++) {\n            this.render_image(imgDoms, i);\n        }\n\t}\n\trender_image(imgDoms, i) {\n        var imgDom = imgDoms[i];\n        var idx = +imgDom.getAttribute(\"recindex\");\n        var blob = this.read_image(idx - 1);\n        var imgReader = new FileReader();\n        imgReader.onload = function(e) {\n           imgDom.src = e.target.result;\n        };\n        imgReader.readAsDataURL(blob);\n    }\n}\n","import {MobiFile} from \"../../tools/mobi.js\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst MobiViewer = ({file}) => {\r\n    useEffect(() => {\r\n        \r\n        new Response(file).arrayBuffer().then((arrayBuffer) => {\r\n            new MobiFile(arrayBuffer).render_to(\"book\");\r\n        }).catch((err) => console.log(err));\r\n    }, [file])\r\n    return(\r\n        <div id=\"book\" className=\"w-4/6 mt-5\">\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MobiViewer;","import React, { useState } from 'react';\r\n// import { Document, Page } from 'react-pdf';\r\nimport { Document, Page } from 'react-pdf/dist/esm/entry.webpack';\r\nimport { ChevronLeftIcon, ChevronRightIcon, ZoomInIcon, ZoomOutIcon } from '@heroicons/react/solid'\r\nimport localforage from 'localforage';\r\n\r\n\r\nexport default ({ file }) => {\r\n  const [numPages, setNumPages] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [pageList, setPageList] = useState([1]);\r\n  const [scale, setScale] = useState(1);\r\n\r\n  const thumbmaker = (doc) => {\r\n    return new Promise((resolve, reject)=>{\r\n      const imageMaker = async (page) => {\r\n        const viewPort = page.getViewport({scale:0.6})\r\n        const widht = viewPort.width; const height = viewPort.height;\r\n        var canvas = document.createElement(\"canvas\");\r\n        canvas.height = height; canvas.width = widht;\r\n        // @ts-ignore: Unreachable code error\r\n        return page.render({canvasContext: canvas.getContext(\"2d\"), viewport: viewPort}).promise.then(()=> canvas.toDataURL(\"image/webp\", 0.2))\r\n      }\r\n      try{\r\n        doc.getPage(1).then(imageMaker).then((canvas)=>{\r\n          resolve(canvas);\r\n        })\r\n      }catch(err){\r\n        reject();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  function onDocumentLoadSuccess(doc) {\r\n    setNumPages(doc.numPages);\r\n    let pl = [];\r\n    for (var i = 1; i < numPages; i++) {\r\n      pl.push(i);\r\n    }\r\n    setPageList(pl);\r\n    // store currently opened pdf thumbnail to localforage storage\r\n    thumbmaker(doc).then((imageDataUri) => {\r\n      localforage.setItem(\"pdfThumbnail\", imageDataUri)\r\n    }).catch(err => console.log(err));\r\n  }\r\n\r\n  if (!file) { return <>No file provided</> }\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto shadow-2xl\">\r\n      {/* page navigation controls */}\r\n      <div className=\"z-50 flex justify-center items-center space-x-2\">\r\n\r\n\r\n        <span className=\"z-50 relative inline-flex shadow-sm rounded-md\">\r\n          <button\r\n            onClick={() => setPageNumber((pageNumber) => pageNumber - 1)}\r\n            type=\"button\"\r\n            className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\r\n          >\r\n            <ChevronLeftIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n          </button>\r\n          <div>\r\n            <select\r\n              onChange={(e) => {\r\n                setPageNumber(Number(e.target.value))\r\n\r\n              }}\r\n              id=\"location\"\r\n              name=\"location\"\r\n              className=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n              defaultValue=\"Canada\"\r\n            >\r\n              {pageList.map(val => (\r\n                <option key={val} value={val}>{val}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <button\r\n            onClick={() => setPageNumber((pageNumber) => pageNumber + 1)}\r\n            type=\"button\"\r\n            className=\"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\r\n          >\r\n            <ChevronRightIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n          </button>\r\n        </span>\r\n\r\n\r\n        {/* zoom buttons */}\r\n        <div className=\"z-50\">\r\n        <span className=\"relative inline-flex shadow-sm rounded-md\">\r\n          <button\r\n            onClick={() => setScale((scale) => scale - 0.2)}\r\n            type=\"button\"\r\n            className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\r\n          >\r\n            <ZoomOutIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n          </button>\r\n        </span>\r\n        <button\r\n          onClick={() => setScale((scale) => scale + 0.2)}\r\n          type=\"button\"\r\n          className=\"-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500\"\r\n        >\r\n          <ZoomInIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n        </button>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* PDF renderer */}\r\n      <Document\r\n      className=\"-mt-10\"\r\n        file={file}\r\n        onLoadSuccess={onDocumentLoadSuccess}\r\n        renderMode=\"canvas\"\r\n      >\r\n        <Page\r\n          scale={scale}\r\n          pageNumber={pageNumber}\r\n\r\n          renderAnnotationLayer={false}\r\n          renderTextLayer={false}\r\n        />\r\n      </Document>\r\n      {/* <p>Page {pageNumber} of {numPages}</p> */}\r\n    </div>\r\n  );\r\n}","import { useContext } from \"react\";\r\nimport DetailsSidebar from \"../components/DetailsSidebar.component\";\r\nimport EpubViewer from \"../components/Viewers/EpubViewer.component\";\r\nimport MobiViewer from \"../components/Viewers/MobiViewer.component\";\r\nimport PdfViewerComponent from \"../components/Viewers/PdfViewer.component\";\r\nimport CurrentFileContext from \"../tools/currentFileContext\";\r\n\r\nconst FileViewer = () => {\r\n    const {currentFile, setCurrentFile} = useContext(CurrentFileContext);\r\n\r\n    return (\r\n        <div className=\"flex flex-col md:flex-row items-stretch overflow-hidden\">\r\n            <main className=\"flex-1 overflow-y-auto\">\r\n                {/* File viewers */}\r\n                <div className=\"flex justify-center\">\r\n                    {\r\n                        currentFile.fileInfo\r\n                            ? currentFile.fileInfo.type === \"pdf\"\r\n                                ? <PdfViewerComponent file={currentFile.file} />\r\n                                : currentFile.fileInfo.type === \"epub\"\r\n                                    ? <EpubViewer file={currentFile.file} />\r\n                                    : currentFile.fileInfo.type === \"kindle\" || currentFile.fileInfo.type === \"mobi\"\r\n                                        ? <MobiViewer file={currentFile.file} />\r\n                                        : \"null\"\r\n                            : null\r\n\r\n                    }\r\n                </div>\r\n            </main>\r\n            <DetailsSidebar />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FileViewer;","import axios from \"axios\";\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\nimport CurrentFileContext from \"../tools/currentFileContext\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { useStore } from \"react-redux\";\r\n\r\nconst Loading = () => {\r\n    const [msg, setMsg] = useState(\"Getting your book ready\");\r\n    useEffect(() => {\r\n        let x = 0;\r\n        setInterval(() => {\r\n            if (x == 0) {\r\n                setMsg(\"Please be patient\");\r\n                x = 1;\r\n            } else {\r\n                setMsg(\"Getting your book ready\");\r\n                x = 0\r\n            }\r\n        }, 7000);\r\n    }, []);\r\n    return (\r\n        <div className=\"absolute h-full w-full top-0 left-0 bg-gray-700 z-50 bg-opacity-95\">\r\n            <div className=\"w-full h-full flex flex-col justify-center items-center space-y-4\">\r\n                <svg class=\"spinner h-20 w-20\" viewBox=\"0 0 50 50\">\r\n                    <circle class=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"5\"></circle>\r\n                </svg>\r\n                <p className=\"text-white text-5xl\">{msg}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Explore = () => {\r\n    const myRef = useRef(null)\r\n    const [searchResult, setSearchResult] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [bookName, setBookName] = useState(\"\");\r\n    const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n    const search = () => {\r\n        if (bookName.length < 4) return;\r\n        setSearchLoading(true);\r\n        setSearchResult([])\r\n        myRef.current.scrollIntoView();\r\n\r\n        axios.get(`${process.env.REACT_APP_SERVER_URL}/search?bookName=${bookName}`).then(listHtml => {\r\n            listHtml.data.searchResult.forEach((element, i) => {\r\n                const doc = new DOMParser().parseFromString(element, \"text/html\");\r\n                const fileHref = doc.querySelector(\".file-left a\").getAttribute(\"href\");\r\n                const title = doc.querySelector(\".file-left .file-img\").getAttribute(\"title\");\r\n                const thumbnail = doc.querySelector(\".file-left .file-img\").getAttribute(\"src\");\r\n                const size = doc.querySelector(\"span.fi-size\").textContent;\r\n\r\n                const fileInfo = {\r\n                    href: fileHref,\r\n                    title: title,\r\n                    thumbnail: thumbnail,\r\n                    size: size,\r\n                }\r\n                setSearchResult(prevValue => {\r\n                    return [...prevValue, fileInfo]\r\n                });\r\n                setSearchLoading(false);\r\n            })\r\n        }).catch(err => { console.log(err); setSearchLoading(false) });\r\n    };\r\n\r\n    const getDownloadLink = (href, title) => {\r\n        console.log(\"sending href \", href);\r\n        setLoading(true);\r\n        let errorTimeout = setTimeout(() => {\r\n            setLoading(false);\r\n        }, 30000);\r\n        axios.post(`${process.env.REACT_APP_SERVER_URL}/getDwonloadLink`, {\r\n            \"fileLink\": href,\r\n            \"bookTitle\": title\r\n        }).then(response => {\r\n            console.log(response.data);\r\n            const { fileInfo } = response.data;\r\n            setLoading(false);\r\n            clearTimeout(errorTimeout);\r\n\r\n            let confirmDownload = window.confirm(\"Download this ebook?\");\r\n            if (confirmDownload) {\r\n                window.open(fileInfo.fileUrl, '_self');\r\n            }\r\n\r\n        }).catch(err => { console.log(err); setLoading(false); alert(\"Sorry book can not be proccessed. Please try with another item.\") });\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className={`bg-white overflow-y-auto ${searchResult.length ? \"py-2 sm:py-0\" : \"py-16 sm:py-24\"}`}>\r\n            <div className={`relative ${searchResult.length ? \"sm:py-4\" : \"sm:py-16\"}`}>\r\n                {/* Dots in background */}\r\n                <div aria-hidden=\"true\" className=\"hidden sm:block \">\r\n                    <div className=\"absolute inset-y-0 left-0 w-1/2 bg-gray-50 rounded-r-3xl\" />\r\n                    <svg className=\"absolute top-8 left-1/2 -ml-3\" width={404} height={392} fill=\"none\" viewBox=\"0 0 404 392\">\r\n                        <defs>\r\n                            <pattern\r\n                                id=\"8228f071-bcee-4ec8-905a-2a059a2cc4fb\"\r\n                                x={0}\r\n                                y={0}\r\n                                width={20}\r\n                                height={20}\r\n                                patternUnits=\"userSpaceOnUse\"\r\n                            >\r\n                                <rect x={0} y={0} width={4} height={4} className=\"text-gray-200\" fill=\"currentColor\" />\r\n                            </pattern>\r\n                        </defs>\r\n                        <rect width={404} height={392} fill=\"url(#8228f071-bcee-4ec8-905a-2a059a2cc4fb)\" />\r\n                    </svg>\r\n                </div>\r\n                <div className=\"mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8\">\r\n                    <div className=\"relative rounded-2xl px-6 py-10 bg-indigo-600 overflow-y-auto shadow-xl sm:px-12 sm:py-20\">\r\n                        <div aria-hidden=\"true\" className=\"absolute inset-0 -mt-72 sm:-mt-32 md:mt-0\">\r\n                            <svg\r\n                                className=\"absolute inset-0 h-full w-full\"\r\n                                preserveAspectRatio=\"xMidYMid slice\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                fill=\"none\"\r\n                                viewBox=\"0 0 1463 360\"\r\n                            >\r\n                                <path\r\n                                    className=\"text-indigo-500 text-opacity-40\"\r\n                                    fill=\"currentColor\"\r\n                                    d=\"M-82.673 72l1761.849 472.086-134.327 501.315-1761.85-472.086z\"\r\n                                />\r\n                                <path\r\n                                    className=\"text-indigo-700 text-opacity-40\"\r\n                                    fill=\"currentColor\"\r\n                                    d=\"M-217.088 544.086L1544.761 72l134.327 501.316-1761.849 472.086z\"\r\n                                />\r\n                            </svg>\r\n                        </div>\r\n                        <div className=\"relative\">\r\n                            <div className=\"sm:text-center\">\r\n                                <h2 className=\"text-3xl font-extrabold text-white tracking-tight sm:text-4xl\">\r\n                                    Find your favorit books\r\n                                </h2>\r\n                                <p className=\"mt-4 mx-auto max-w-2xl text-lg text-indigo-200\">\r\n                                    Ask pottasha which book to read next\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"mt-8 sm:mx-auto sm:max-w-lg sm:flex\">\r\n                                <div className=\"min-w-0 flex-1\">\r\n                                    <label htmlFor=\"cta-email\" className=\"sr-only\">\r\n                                        Type book title\r\n                                    </label>\r\n                                    <input\r\n                                        id=\"cta-email\"\r\n                                        type=\"search\"\r\n                                        className=\"block w-full border border-transparent rounded-md px-5 py-3 text-base text-gray-900 placeholder-gray-500 shadow-sm focus:outline-none focus:border-transparent focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigo-600\"\r\n                                        placeholder=\"Type book title\"\r\n                                        onChange={(e) => setBookName(e.target.value)}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"mt-4 sm:mt-0 sm:ml-3\">\r\n                                    <button\r\n\r\n                                        onClick={() => search()}\r\n                                        className=\"block w-full rounded-md border border-transparent px-5 py-3 bg-indigo-500 text-base font-medium text-white shadow hover:bg-indigo-400 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigo-600 sm:px-10\"\r\n                                    >\r\n                                        Search\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Search result list */}\r\n            <div className={`pt-4 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 overflow-y-auto`}>\r\n                {loading ? <Loading /> : null}\r\n                <h1 className=\"text-xl\">{searchResult.length ? `Search result for ${bookName}` : searchLoading ? \"Searching for your book...\" : \"\"}</h1>\r\n                <section className={`mt-8 pb-16`} aria-labelledby=\"gallery-heading\">\r\n                    <ul role=\"list\" className=\"grid grid-cols-3 gap-x-4 gap-y-8 sm:grid-cols-5 sm:gap-x-6 md:grid-cols-6 lg:grid-cols-5 xl:grid-cols-6 xl:gap-x-8\" >\r\n                        {searchResult.length ? searchResult.map((file, index) => (\r\n                            <li key={index} className=\"relative cursor-pointer\">\r\n                                <div\r\n                                    className=\"border-2 border-white focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-indigo-500 group flex flex-col justify-center w-full aspect-w-10 aspect-h-12 rounded-lg bg-gray-100 overflow-hidden shadow-xl\" >\r\n                                    <img src={file.thumbnail} alt=\"\" className=\"group-hover:opacity-75\" />\r\n                                </div>\r\n                                <p className=\"mt-2 block text-sm font-medium text-gray-900 truncate pointer-events-none\">\r\n                                    {file.title}\r\n                                </p>\r\n\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            // open pdf file viewer\r\n                                            getDownloadLink(file.href, file.title);\r\n                                        }}\r\n                                        type=\"button\"\r\n                                        className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                                    >\r\n                                        Download\r\n                                    </button>\r\n                                    <p className=\"block text-sm font-medium text-gray-500 pointer-events-none\">{file.size}</p>\r\n                                </div>\r\n                            </li>\r\n                        )) :\r\n                            Array(10).fill(0).map((val, i) => (\r\n                                <div key={i} className={`${searchLoading ? \"block\" : \"hidden\"} px-2 py-2 flex-row justify-center items-center focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-indigo-500 group block w-full aspect-w-10 aspect-h-12 rounded-lg bg-white overflow-hidden shadow-xl`}>\r\n                                    <Skeleton height={150} count={1} />\r\n                                    <Skeleton height={10} count={1} />\r\n                                </div>\r\n                            ))\r\n                        }\r\n                    </ul>\r\n                    \r\n                </section>\r\n            </div>\r\n            <span ref={myRef}></span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Explore;","import { Route, BrowserRouter as Router, Switch } from \"react-router-dom\"\nimport MyBooks from \"./pages/MyBooks.page\";\nimport SharedShelfs from \"./pages/SharedShelfs.page\";\nimport Shelfs from \"./pages/Shelfs.page\";\nimport Signin from \"./pages/Signin.page\";\nimport Signup from \"./pages/Signup.page\";\n\nimport './App.css';\nimport Sidebar from \"./components/Sidebar.component\";\nimport SearchHeader from \"./components/SearchHeader.component\";\nimport { useState } from \"react\";\nimport CurrentFileContext from \"./tools/currentFileContext\";\nimport FileViewer from \"./pages/FileViewer.page\";\nimport Explore from \"./pages/Explore.page\";\n\nfunction App() {\n  const [currentFile, setCurrentFile] = useState({\n    currentFile: {\n      // file blob\n      file: null,\n      // file information object\n      fileInfo: null\n    }\n  });\n\n  console.log(process.env.REACT_APP_SERVER_URL)\n\n  return (\n    <CurrentFileContext.Provider value={ {currentFile, setCurrentFile} }>\n    <div className=\"App relative h-screen flex overflow-hidden bg-white\">\n      <Router>\n        <Sidebar />\n        <div className=\"flex flex-col w-0 flex-1 overflow-hidden \">\n          {/* SearchHeader is mobile only */}\n          {/* <SearchHeader />  */}\n\n          {/* Router paths */}\n\n          <Switch>\n            <Route path=\"/\" exact component={MyBooks} />\n            <Route path=\"/signin\" component={Signin} />\n            <Route path=\"/signup\" component={Signup} />\n            <Route path=\"/mybooks\" component={MyBooks} />\n            <Route path=\"/shelfs\" component={Shelfs} />\n            <Route path=\"/sharedshelfs\" component={SharedShelfs} />\n            <Route path=\"/fileviewer\" component={FileViewer} />\n            <Route path=\"/explore\" component={Explore} />\n          </Switch>\n        </div>\n      </Router>\n    </div>\n    </CurrentFileContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from '@reduxjs/toolkit'\r\nimport menuReducer from \"./menuSlice\";\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    menuState: menuReducer\r\n  },\r\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}